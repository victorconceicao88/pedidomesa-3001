<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Sistema de Pedidos para Garçom - Restaurante Cozinha da Vivi">
  <title>Cozinha da Vivi - Sistema Garçom</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <style>
:root {
  --primary-color: #280b04;
  --secondary-color: #ffb501;
  --dark-color: #2f3542;
  --light-color: #f1f2f6;
  --success-color: #617c33;
  --danger-color: #dc3545;
  --warning-color: #ffc107;
  --indoor-color: #3498db;
  --outdoor-color: #2ecc71;
}

* {
  -webkit-tap-highlight-color: transparent;
}

body {
  font-family: 'Poppins', sans-serif;
  background-color: #f8f9fa;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  touch-action: manipulation;
  overflow-x: hidden;
}

.main-content {
  flex: 1;
  padding-bottom: 80px; /* Espaço para o FAB */
}

/* Navbar Fixo */
.main-header {
  position: sticky;
  top: 0;
  z-index: 1030;
  background-color: var(--primary-color);
  color: white;
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
  padding: 0.5rem 0;
}

.navbar-container {
  max-width: 1200px;
  margin: 0 auto;
  width: 100%;
  padding: 0 15px;
}

.logo-container {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.logo-img {
  height: 40px;
  width: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid var(--secondary-color);
  transition: transform 0.2s;
}

.logo-img:hover {
  transform: scale(1.05);
}

.logo-text {
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.logo-text h1 {
  font-size: 1rem;
  margin-bottom: 0.15rem;
  line-height: 1.2;
  color: var(--secondary-color);
  font-weight: 700;
}

.logo-text p {
  font-size: 0.65rem;
  margin-bottom: 0;
  color: rgba(255,255,255,0.8);
}

/* Seção de Áreas */
.areas-section {
  margin-bottom: 1rem;
  padding: 0 10px;
}

.area-tabs {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding-bottom: 8px;
  margin-bottom: 15px;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-left: 5px;
  padding-right: 5px;
}

.area-tabs::-webkit-scrollbar {
  display: none;
}

.area-tab {
  padding: 10px 15px;
  border-radius: 8px;
  font-size: 0.8rem;
  font-weight: 500;
  transition: all 0.3s ease;
  border: 1px solid rgba(40, 11, 4, 0.1);
  background-color: white;
  color: var(--primary-color);
  cursor: pointer;
  text-align: center;
  white-space: nowrap;
  min-width: 100px;
}

.area-tab i {
  margin-right: 5px;
  font-size: 0.9rem;
}

.area-tab.active {
  background-color: var(--primary-color);
  color: var(--secondary-color);
  border-color: var(--primary-color);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(40, 11, 4, 0.15);
}

.area-tab:hover:not(.active) {
  background-color: #f8f9fa;
}

/* Seção de Mesas */
.tables-section {
  padding: 15px 10px;
}

.tables-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 12px;
  margin-top: 15px;
}

.table-card {
  background-color: white;
  border-radius: 10px;
  padding: 12px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  border: 2px solid transparent;
  position: relative;
  min-height: 90px;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.table-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.table-card.active {
  border-color: var(--primary-color);
  background-color: rgba(40, 11, 4, 0.05);
}

.table-number {
  font-size: 1.3rem;
  font-weight: bold;
  color: var(--primary-color);
  margin-bottom: 5px;
}

.table-location {
  position: absolute;
  top: 5px;
  right: 5px;
  font-size: 0.6rem;
  padding: 2px 5px;
  border-radius: 3px;
}

.location-indoor {
  background-color: var(--indoor-color);
  color: white;
}

.location-outdoor {
  background-color: var(--outdoor-color);
  color: white;
}

.table-status {
  font-size: 0.7rem;
  padding: 3px 8px;
  border-radius: 20px;
  display: inline-block;
  margin-top: auto;
}

.status-empty {
  background-color: #e9ecef;
  color: #495057;
}

.status-occupied {
  background-color: var(--warning-color);
  color: #212529;
}

.status-paying {
  background-color: var(--danger-color);
  color: white;
}

.table-consumption {
  margin-top: 5px;
  font-size: 0.7rem;
  color: #6c757d;
  border-top: 1px dashed #eee;
  padding-top: 3px;
}

/* Seção do Cardápio */
.menu-section {
  margin-bottom: 2rem;
  padding: 0 10px;
}

.menu-header {
  display: flex;
  flex-direction: column;
  margin-bottom: 1.5rem;
}

.menu-title {
  margin-top: 5px;
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  font-size: 1.5rem;
  color: var(--primary-color);
  margin-bottom: 1rem;
  position: relative;
  display: inline-block;
  padding-bottom: 8px;
}

.menu-title:after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  width: 50px;
  height: 3px;
  background-color: var(--secondary-color);
  border-radius: 2px;
}

.category-tabs {
  display: flex;
  gap: 6px;
  overflow-x: auto;
  padding-bottom: 8px;
  scrollbar-width: none;
  -ms-overflow-style: none;
  padding-left: 5px;
  padding-right: 5px;
}

.category-tabs::-webkit-scrollbar {
  display: none;
}

.category-tab {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-width: 80px;
  padding: 10px 8px;
  border-radius: 10px;
  font-size: 0.75rem;
  font-weight: 500;
  transition: all 0.3s ease;
  border: 1px solid rgba(40, 11, 4, 0.1);
  background-color: white;
  color: var(--primary-color);
  cursor: pointer;
  text-align: center;
}

.category-tab i {
  font-size: 1rem;
  margin-bottom: 5px;
  color: var(--primary-color);
}

.category-tab.active {
  background-color: var(--primary-color);
  color: var(--secondary-color);
  border-color: var(--primary-color);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(40, 11, 4, 0.15);
}

.category-tab.active i {
  color: var(--secondary-color);
}

.category-tab:hover:not(.active) {
  background-color: #f8f9fa;
}

.product-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  gap: 15px;
}

.product-card {
  background-color: white;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
  height: 100%;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  border-color: var(--primary-color);
}

.product-badge {
  position: absolute;
  top: 8px;
  right: 8px;
  padding: 3px 8px;
  border-radius: 20px;
  font-size: 0.65rem;
  font-weight: 600;
  z-index: 1;
}

.product-image-container {
  position: relative;
  height: 120px;
  overflow: hidden;
}

.product-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.5s ease;
}

.product-card:hover .product-image {
  transform: scale(1.05);
}

.product-content {
  padding: 12px;
  flex: 1;
  display: flex;
  flex-direction: column;
}

.product-name {
  font-size: 0.95rem;
  font-weight: 700;
  color: var(--primary-color);
  margin-bottom: 6px;
  line-height: 1.3;
}

.product-description {
  font-size: 0.75rem;
  color: #6c757d;
  margin-bottom: 10px;
  line-height: 1.4;
  flex: 1;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.product-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: auto;
  padding-top: 10px;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
}

.product-price {
  font-weight: 700;
  color: var(--primary-color);
  font-size: 1rem;
  margin: 0;
}

.add-to-cart {
  background-color: var(--primary-color);
  color: var(--secondary-color);
  border: none;
  border-radius: 6px;
  padding: 6px 12px;
  font-size: 0.8rem;
  font-weight: 500;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  gap: 5px;
  cursor: pointer;
  min-width: 80px;
  justify-content: center;
}

.add-to-cart:hover {
  background-color: var(--primary-color);
  transform: scale(1.05);
}

.add-to-cart.added {
  background-color: var(--success-color) !important;
}

/* Seção de Pedidos Ativos */
.active-orders {
  background-color: white;
  border-radius: 10px;
  padding: 15px;
  margin: 15px 0;
  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
}

.order-card {
  border-left: 4px solid var(--primary-color);
  margin-bottom: 12px;
  border-radius: 5px;
  background-color: white;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  transition: all 0.3s;
}

.order-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.order-header {
  padding: 10px 12px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
}

.order-header:hover {
  background-color: #f8f9fa;
}

.order-body {
  padding: 12px;
  display: none;
}

.order-body.show {
  display: block;
}

.order-items {
  margin-bottom: 12px;
}

.order-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 6px;
  padding-bottom: 6px;
  border-bottom: 1px dashed #eee;
}

.order-item:last-child {
  border-bottom: none;
  margin-bottom: 0;
}

.order-footer {
  padding: 10px 12px;
  border-top: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 8px;
}

.order-total {
  font-weight: bold;
  color: var(--primary-color);
  font-size: 0.95rem;
}

.order-actions {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

/* Botões */
.btn {
  padding: 0.4rem 0.8rem;
  font-size: 0.85rem;
}

.btn-sm {
  padding: 0.3rem 0.6rem;
  font-size: 0.8rem;
}

.btn-primary {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
  color: var(--secondary-color);
}

.btn-primary:hover {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
  color: var(--secondary-color);
  opacity: 0.9;
}

.btn-success {
  background-color: var(--success-color);
  border-color: var(--success-color);
}

.btn-warning {
  background-color: var(--warning-color);
  border-color: var(--warning-color);
  color: #212529;
}

.btn-danger {
  background-color: var(--danger-color);
  border-color: var(--danger-color);
}

/* Modal de Pedido */
.order-modal .modal-body {
  max-height: 70vh;
  overflow-y: auto;
}

.modal-dialog {
  margin: 10px auto;
}

.modal-content {
  border-radius: 12px;
}

.modal-header {
  padding: 12px 15px;
}

.modal-title {
  font-size: 1.1rem;
}

.modal-body {
  padding: 15px;
}

/* Kitchen Print Styles */
.kitchen-order {
  font-family: 'Courier New', monospace;
  font-size: 14px;
  line-height: 1.3;
  padding: 10px;
  max-width: 58mm;
}

.kitchen-order-header {
  text-align: center;
  font-weight: bold;
  margin-bottom: 10px;
  border-bottom: 1px dashed #000;
  padding-bottom: 5px;
}

.kitchen-order-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 3px;
}

.kitchen-order-footer {
  border-top: 1px dashed #000;
  margin-top: 10px;
  padding-top: 5px;
  font-weight: bold;
}

/* Status badges */
.status-badge {
  font-size: 0.75rem;
  padding: 3px 6px;
  border-radius: 20px;
  font-weight: 500;
}

.status-pending {
  background-color: var(--warning-color);
  color: #212529;
}

.status-preparing {
  background-color: #fd7e14;
  color: white;
}

.status-ready {
  background-color: var(--success-color);
  color: white;
}

.status-delivered {
  background-color: #198754;
  color: white;
}

.status-cancelled {
  background-color: var(--danger-color);
  color: white;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .product-grid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 12px;
  }
  
  .tables-grid {
    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
    gap: 10px;
  }
  
  .menu-title {
    font-size: 1.3rem;
  }
  
  .order-actions {
    flex-direction: row;
    gap: 5px;
  }
  
  .order-footer {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .order-total {
    margin-bottom: 5px;
  }
  
  .modal-dialog {
    margin: 10px;
  }
}

@media (max-width: 576px) {
  .product-grid {
    grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
    gap: 10px;
  }
  
  .category-tab {
    min-width: 70px;
    padding: 8px 6px;
    font-size: 0.7rem;
  }
  
  .category-tab i {
    font-size: 0.9rem;
  }
  
  .menu-title {
    font-size: 1.2rem;
  }
  
  .tables-grid {
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  }
  
  .table-number {
    font-size: 1.1rem;
  }
  
  .order-actions .btn {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
  }
  
  .product-image-container {
    height: 100px;
  }
  
  .product-name {
    font-size: 0.85rem;
  }
  
  .product-description {
    font-size: 0.7rem;
    -webkit-line-clamp: 3;
  }
  
  .product-price {
    font-size: 0.9rem;
  }
  
  .add-to-cart {
    padding: 5px 8px;
    font-size: 0.75rem;
    min-width: 70px;
  }
  
  .modal-dialog {
    margin: 5px;
  }
  
  .modal-content {
    border-radius: 10px;
  }
}

/* Animations */
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.pulse {
  animation: pulse 1.5s infinite;
}

/* Highlight for new orders */
.new-order {
  animation: highlight 2s;
  border-left: 4px solid var(--primary-color) !important;
}

@keyframes highlight {
  0% { background-color: rgba(40, 11, 4, 0.3); }
  100% { background-color: transparent; }
}

/* Floating action button */
.fab {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background-color: var(--primary-color);
  color: var(--secondary-color);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.3rem;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  cursor: pointer;
  z-index: 1000;
  transition: all 0.3s;
  border: none;
}

.fab:hover {
  transform: scale(1.1);
}

.fab-badge {
  font-size: 0.7rem;
  padding: 4px 6px;
  min-width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Product options styling */
.option-section {
  margin-bottom: 12px;
}

.option-section-title {
  font-weight: bold;
  margin-bottom: 8px;
  color: var(--primary-color);
  border-bottom: 1px solid #eee;
  padding-bottom: 3px;
  font-size: 0.9rem;
}

.option-item {
  margin-bottom: 6px;
}

.option-item label {
  display: flex;
  align-items: center;
  cursor: pointer;
  font-size: 0.85rem;
}

.option-item input[type="checkbox"],
.option-item input[type="radio"] {
  margin-right: 6px;
  width: 16px;
  height: 16px;
}

.required-option {
  color: var(--danger-color);
  font-weight: bold;
}

.additional-price {
  color: var(--success-color);
  font-weight: bold;
  margin-left: 3px;
  font-size: 0.8rem;
}

.max-selection {
  color: var(--danger-color);
  font-size: 0.7rem;
  margin-top: 3px;
  display: none;
}

.option-item.disabled {
  opacity: 0.5;
  pointer-events: none;
}

.required-field {
  border-left: 3px solid var(--danger-color) !important;
  padding-left: 6px;
}

/* Badge for table consumption */
.consumption-badge {
  font-size: 0.65rem;
  padding: 2px 5px;
  border-radius: 8px;
  background-color: #f8f9fa;
  color: #495057;
  margin-left: 3px;
}

/* Modal for table consumption */
.table-consumption-modal .modal-body {
  max-height: 60vh;
  overflow-y: auto;
}

.consumption-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 0;
  border-bottom: 1px dashed #eee;
}

.consumption-item:last-child {
  border-bottom: none;
}

.consumption-item-actions {
  display: flex;
  gap: 5px;
}

.consumption-total {
  font-weight: bold;
  color: var(--primary-color);
  margin-top: 12px;
  padding-top: 8px;
  border-top: 2px solid var(--primary-color);
  font-size: 1rem;
}

/* Empty state */
.empty-state {
  text-align: center;
  padding: 20px 0;
  color: #6c757d;
}

.empty-state i {
  font-size: 1.5rem;
  margin-bottom: 8px;
  color: #adb5bd;
}

/* Mobile menu navigation */
.mobile-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background-color: white;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
  z-index: 1000;
  display: none;
}

.mobile-nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 8px 5px;
  font-size: 0.7rem;
  color: var(--dark-color);
  text-decoration: none;
  transition: all 0.3s;
}

.mobile-nav-item i {
  font-size: 1.2rem;
  margin-bottom: 3px;
}

.mobile-nav-item.active {
  color: var(--primary-color);
}

.mobile-nav-item:hover {
  color: var(--primary-color);
}

/* Swipe gestures for navigation */
.swipe-area {
  width: 100%;
  height: 100%;
  position: fixed;
  top: 0;
  left: 0;
  z-index: 1;
  pointer-events: none;
}

/* Loading spinner */
.loading-spinner {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.5);
  z-index: 2000;
  justify-content: center;
  align-items: center;
}

.spinner {
  width: 50px;
  height: 50px;
  border: 5px solid rgba(255,255,255,0.3);
  border-radius: 50%;
  border-top-color: var(--secondary-color);
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@media (max-width: 768px) {
  .mobile-nav {
    display: flex;
    justify-content: space-around;
  }
  
  .main-content {
    padding-bottom: 60px;
  }
  
  .fab {
    bottom: 70px;
  }
}

/* Offline indicator */
.offline-indicator {
  position: fixed;
  bottom: 70px;
  left: 50%;
  transform: translateX(-50%);
  background-color: var(--danger-color);
  color: white;
  padding: 5px 15px;
  border-radius: 20px;
  font-size: 0.8rem;
  z-index: 1001;
  display: none;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* Toast notifications */
.toast-container {
  position: fixed;
  bottom: 80px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1100;
  width: 90%;
  max-width: 350px;
}

.toast {
  font-size: 0.85rem;
  padding: 10px 15px;
}
  </style>
</head>
<body>
  <!-- Main Navigation -->
  <header class="main-header">
    <div class="container navbar-container">
      <div class="d-flex justify-content-between align-items-center py-1">
        <div class="logo-container" id="logo-home">
          <img src="vivi.jpg" alt="Cozinha da Vivi" class="logo-img">
          <div class="logo-text">
            <h1 class="mb-0">Cozinha da Vivi</h1>
            <p class="mb-0">Sistema Garçom</p>
          </div>
        </div>
        <div class="d-flex align-items-center gap-2">
          <div id="current-table" class="text-white fw-bold d-none d-md-block">
            Mesa: <span id="table-number">-</span>
          </div>
          <div class="badge bg-light text-dark" id="order-count">0 itens</div>
        </div>
      </div>
    </div>
  </header>

  <main class="main-content">
    <!-- Seção de Áreas -->
    <section id="areas-section" class="areas-section">
      <div class="container">
        <h2 class="menu-title">Áreas do Restaurante</h2>
        <div class="area-tabs">
          <div class="area-tab active" data-area="all">
            <i class="fas fa-utensils"></i>
            <span>Todas</span>
          </div>
          <div class="area-tab" data-area="sala-principal">
            <i class="fas fa-home"></i>
            <span>Principal</span>
          </div>
          <div class="area-tab" data-area="esplanada">
            <i class="fas fa-umbrella-beach"></i>
            <span>Esplanada</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Seção de Mesas -->
    <section id="tables-section" class="tables-section">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="menu-title">Mesas</h2>
          <div class="d-flex gap-2">
            <button id="refresh-tables" class="btn btn-outline-primary btn-sm">
              <i class="fas fa-sync-alt"></i>
            </button>
            <button id="view-consumption" class="btn btn-outline-secondary btn-sm d-none">
              <i class="fas fa-clipboard-list"></i>
            </button>
          </div>
        </div>
        <div class="tables-grid" id="tables-container">
          <!-- Mesas serão adicionadas dinamicamente aqui -->
        </div>
      </div>
    </section>

    <!-- Seção de Cardápio (inicialmente oculta) -->
    <section id="menu-section" class="menu-section d-none">
      <div class="container">
        <div class="menu-header">
          <div class="d-flex justify-content-between align-items-center">
            <h2 class="menu-title">Cardápio</h2>
            <div class="d-flex gap-2">
              <button id="back-to-tables" class="btn btn-outline-secondary btn-sm">
                <i class="fas fa-arrow-left"></i>
              </button>
              <button id="view-current-consumption" class="btn btn-outline-primary btn-sm">
                <i class="fas fa-clipboard-list"></i>
              </button>
            </div>
          </div>
          <div class="category-tabs">
            <div class="category-tab active" data-category="all">
              <i class="fas fa-utensils"></i>
              <span>Todos</span>
            </div>
            <div class="category-tab" data-category="churrasco">
              <i class="fas fa-fire-alt"></i>
              <span>Churrasco</span>
            </div>
            <div class="category-tab" data-category="burguers">
              <i class="fas fa-hamburger"></i>
              <span>Burguers</span>
            </div>
            <div class="category-tab" data-category="combos">
              <i class="fas fa-box-open"></i>
              <span>Combos</span>
            </div>
            <div class="category-tab" data-category="pratos">
              <i class="fas fa-utensil-spoon"></i>
              <span>Pratos</span>
            </div>
            <div class="category-tab" data-category="bebidas">
              <i class="fas fa-glass-whiskey"></i>
              <span>Bebidas</span>
            </div>
            <div class="category-tab" data-category="sobremesas">
              <i class="fas fa-ice-cream"></i>
              <span>Sobremesas</span>
            </div>
          </div>
        </div>

        <div class="product-grid" id="product-container">
          <!-- Churrasco Misto -->
          <div class="product-card" data-id="101" data-category="churrasco" data-has-options="true">
            <div class="product-badge bg-primary">Mais pedido</div>
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=500&auto=format&fit=crop" alt="Churrasco Misto" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Churrasco Misto</h3>
              <p class="product-description">Refeição completa com carnes e acompanhamentos selecionados, preparados na brasa com tempero especial.</p>
              <div class="product-footer">
                <span class="product-price">€ 12,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Maminha -->
          <div class="product-card" data-id="102" data-category="churrasco" data-has-options="true">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=500&auto=format&fit=crop" alt="Maminha" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Maminha</h3>
              <p class="product-description">Maminha suculenta grelhada na brasa, servida com acompanhamentos à escolha.</p>
              <div class="product-footer">
                <span class="product-price">€ 13,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Linguiça Toscana -->
          <div class="product-card" data-id="103" data-category="churrasco" data-has-options="true">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1603360946369-dc9bb6258143?w=500&auto=format&fit=crop" alt="Linguiça Toscana" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Linguiça Toscana</h3>
              <p class="product-description">Linguiça toscana artesanal grelhada, acompanhada de farofa e vinagrete.</p>
              <div class="product-footer">
                <span class="product-price">€ 12,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Costelinha de Porco -->
          <div class="product-card" data-id="104" data-category="churrasco" data-has-options="true">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1603360946369-dc9bb6258143?w=500&auto=format&fit=crop" alt="Costelinha de Porco" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Costelinha de Porco</h3>
              <p class="product-description">Costelinha de porco assada lentamente, com molho barbecue caseiro.</p>
              <div class="product-footer">
                <span class="product-price">€ 12,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- X-Salada -->
          <div class="product-card" data-id="201" data-category="burguers">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=500&auto=format&fit=crop" alt="X-Salada" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">X-Salada</h3>
              <p class="product-description">Pão de hambúrguer, bife de hambúrguer, fiambre, queijo, salada, batata palha e milho.</p>
              <div class="product-footer">
                <span class="product-price">€ 6,50</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- X-Bacon -->
          <div class="product-card" data-id="202" data-category="burguers">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=500&auto=format&fit=crop" alt="X-Bacon" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">X-Bacon</h3>
              <p class="product-description">Pão, hambúrguer, bacon, queijo, fiambre, ovo, alface, tomate, milho e batata palha.</p>
              <div class="product-footer">
                <span class="product-price">€ 8,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>
          
          <!-- X-frango -->
          <div class="product-card" data-id="203" data-category="burguers">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=500&auto=format&fit=crop" alt="X-Frango" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">X-Frango</h3>
              <p class="product-description">Pão, hambúrguer de frango, queijo, fiambre, ovo, alface, tomate, milho e batata palha.</p>
              <div class="product-footer">
                <span class="product-price">€ 8,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>
         
          <!-- Combo Frango Supreme -->
          <div class="product-card" data-id="301" data-category="combos">
            <div class="product-badge bg-success">Combo</div>
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1544025162-d76694265947?w=500&auto=format&fit=crop" alt="Combo Frango Supreme" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Combo Frango Supreme</h3>
              <p class="product-description">Sanduíche de frango com batata frita e bebida. Economize €2,50 em relação à compra separada.</p>
              <div class="product-footer">
                <span class="product-price">€ 10,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Combo X-Tudo -->
          <div class="product-card" data-id="302" data-category="combos">
            <div class="product-badge bg-success">Combo</div>
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1544025162-d76694265947?w=500&auto=format&fit=crop" alt="Combo X-Tudo" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Combo X-Tudo</h3>
              <p class="product-description">Sanduíche completo com batata frita e bebida. Economize €3,00 em relação à compra separada.</p>
              <div class="product-footer">
                <span class="product-price">€ 12,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Porção de Arroz -->
          <div class="product-card" data-id="401" data-category="pratos">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=500&auto=format&fit=crop" alt="Porção de Arroz" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Porção de Arroz</h3>
              <p class="product-description">Porção de arroz branco soltinho, ideal para acompanhar seus pratos favoritos.</p>
              <div class="product-footer">
                <span class="product-price">€ 3,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Porção de Queijo Coalho -->
          <div class="product-card" data-id="402" data-category="pratos">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1601050690597-df0568f70950?w=500&auto=format&fit=crop" alt="Queijo Coalho" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Queijo Coalho</h3>
              <p class="product-description">Queijo coalho grelhado, tradicional do nordeste brasileiro, perfeito para acompanhar molhos.</p>
              <div class="product-footer">
                <span class="product-price">€ 6,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Torresmo -->
          <div class="product-card" data-id="403" data-category="pratos">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1601050690597-df0568f70950?w=500&auto=format&fit=crop" alt="Torresmo" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Torresmo</h3>
              <p class="product-description">Torresmo brasileiro: crocante e delicioso, feito com pedaços de carne de porco, ideal para acompanhar uma cerveja gelada.</p>
              <div class="product-footer">
                <span class="product-price">€ 6,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Porção de Mandioca -->
          <div class="product-card" data-id="404" data-category="pratos">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1601050690597-df0568f70950?w=500&auto=format&fit=crop" alt="Mandioca" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Porção de Mandioca</h3>
              <p class="product-description">Mandioca frita crocante por fora e macia por dentro, acompanha molho à escolha.</p>
              <div class="product-footer">
                <span class="product-price">€ 6,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Porção de Batata Frita -->
          <div class="product-card" data-id="405" data-category="pratos">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1541592106381-b31e9677c0e5?w=500&auto=format&fit=crop" alt="Batata Frita" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Porção de Batata Frita</h3>
              <p class="product-description">Batata frita crocante temperada com sal e ervas finas, acompanha molho à escolha.</p>
              <div class="product-footer">
                <span class="product-price">€ 3,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Porção de Carnes -->
          <div class="product-card" data-id="406" data-category="pratos" data-has-options="true">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=500&auto=format&fit=crop" alt="Porção de Carnes" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Porção de Carnes</h3>
              <p class="product-description">Selecione suas carnes preferidas para montar sua porção especial.</p>
              <div class="product-footer">
                <span class="product-price">€ 10,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Coca-Cola (lata) -->
          <div class="product-card" data-id="5021" data-category="bebidas">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1554866585-cd94860890b7?w=500&auto=format&fit=crop" alt="Coca-Cola (lata)" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Coca-Cola (lata)</h3>
              <p class="product-description">Refrigerante Coca-Cola em lata 350ml, geladinho para acompanhar sua refeição.</p>
              <div class="product-footer">
                <span class="product-price">€ 2,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Açai Pequeno -->
          <div class="product-card" data-id="601" data-category="sobremesas">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1551024506-0bccd828d307?w=500&auto=format&fit=crop" alt="Açai Pequeno" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Açai Pequeno</h3>
              <p class="product-description">Açai cremoso com acompanhamentos à escolha. Tamanho pequeno (300ml).</p>
              <div class="product-footer">
                <span class="product-price">€ 6,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Açai Grande -->
          <div class="product-card" data-id="602" data-category="sobremesas">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1551024506-0bccd828d307?w=500&auto=format&fit=crop" alt="Açai Grande" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Açai Grande</h3>
              <p class="product-description">Açai cremoso com acompanhamentos à escolha. Tamanho grande (500ml).</p>
              <div class="product-footer">
                <span class="product-price">€ 10,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>

          <!-- Pudim Caseiro -->
          <div class="product-card" data-id="603" data-category="sobremesas">
            <div class="product-image-container">
              <img src="https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=500&auto=format&fit=crop" alt="Pudim Caseiro" class="product-image">
            </div>
            <div class="product-content">
              <h3 class="product-name">Pudim Caseiro</h3>
              <p class="product-description">Pudim tradicional caseiro com calda de caramelo. Feito com ingredientes selecionados.</p>
              <div class="product-footer">
                <span class="product-price">€ 3,00</span>
                <button class="add-to-cart">
                  <i class="fas fa-plus"></i> Add
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Seção de Pedidos Ativos -->
    <section id="active-orders" class="active-orders d-none">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="menu-title">Pedidos Ativos</h2>
          <button id="refresh-orders" class="btn btn-outline-primary btn-sm">
            <i class="fas fa-sync-alt"></i>
          </button>
        </div>
        
        <div id="orders-container">
          <!-- Pedidos serão adicionados dinamicamente aqui -->
          <div class="text-center py-4 text-muted">
            <i class="fas fa-clipboard-list fa-2x mb-3"></i>
            <p>Nenhum pedido ativo no momento</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Modal de Pedido Atual -->
    <div class="modal fade" id="currentOrderModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">Pedido - Mesa <span id="modal-table-number"></span></h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-8">
                <div class="card mb-3">
                  <div class="card-header bg-light">
                    <h6 class="mb-0">Itens do Pedido</h6>
                  </div>
                  <div class="card-body p-0">
                    <div id="order-items-list" class="list-group list-group-flush">
                      <!-- Itens serão adicionados dinamicamente aqui -->
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="card">
                  <div class="card-header bg-light">
                    <h6 class="mb-0">Resumo</h6>
                  </div>
                  <div class="card-body">
                    <div class="d-flex justify-content-between mb-2">
                      <span>Subtotal:</span>
                      <span id="order-subtotal">€ 0,00</span>
                    </div>
                    <div class="d-flex justify-content-between mb-3">
                      <span>Total:</span>
                      <span id="order-total" class="fw-bold">€ 0,00</span>
                    </div>
                    <div class="d-grid gap-2">
                      <button id="send-to-kitchen" class="btn btn-primary">
                        <i class="fas fa-paper-plane me-1"></i> Enviar
                      </button>
                      <button id="cancel-order" class="btn btn-outline-danger">
                        <i class="fas fa-times me-1"></i> Cancelar
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal de Opções do Produto -->
    <div class="modal fade" id="productOptionsModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title" id="productOptionsModalTitle">Opções do Produto</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="product-options-content">
            <!-- Conteúdo das opções será inserido aqui -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" class="btn btn-primary" id="confirm-product-options">
              <i class="fas fa-check me-1"></i> Confirmar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para Visualizar Pedido da Cozinha -->
    <div class="modal fade" id="kitchenOrderModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">Pedido para Cozinha</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="kitchen-order-content">
            <!-- Conteúdo do pedido será inserido aqui -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            <button type="button" class="btn btn-primary" id="print-kitchen-order">
              <i class="fas fa-print me-1"></i> Imprimir
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para Visualizar Consumo da Mesa -->
    <div class="modal fade" id="tableConsumptionModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">Consumo - Mesa <span id="consumption-table-number"></span></h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body table-consumption-modal">
            <div id="table-consumption-list">
              <!-- Itens de consumo serão adicionados dinamicamente aqui -->
            </div>
            <div class="consumption-total text-end">
              Total: <span id="table-consumption-total">€ 0,00</span>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
            <button type="button" class="btn btn-primary" id="add-items-to-table">
              <i class="fas fa-plus me-1"></i> Adicionar
            </button>
            <button type="button" class="btn btn-success" id="close-table">
              <i class="fas fa-check-circle me-1"></i> Fechar
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Botão Flutuante para Pedido Atual -->
  <div class="fab d-none" id="current-order-fab">
    <i class="fas fa-clipboard-list"></i>
    <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="fab-badge">
      0
    </span>
  </div>

  <!-- Navegação Mobile -->
  <nav class="mobile-nav">
    <a href="#" class="mobile-nav-item active" data-section="tables">
      <i class="fas fa-utensils"></i>
      <span>Mesas</span>
    </a>
    <a href="#" class="mobile-nav-item" data-section="menu">
      <i class="fas fa-book-open"></i>
      <span>Cardápio</span>
    </a>
    <a href="#" class="mobile-nav-item" data-section="orders">
      <i class="fas fa-clipboard-list"></i>
      <span>Pedidos</span>
    </a>
  </nav>

  <!-- Loading Spinner -->
  <div class="loading-spinner" id="loading-spinner">
    <div class="spinner"></div>
  </div>

  <!-- Offline Indicator -->
  <div class="offline-indicator" id="offline-indicator">
    <i class="fas fa-wifi-slash me-1"></i> Sem conexão
  </div>

  <!-- Toast Notifications Container -->
  <div class="toast-container" id="toast-container">
    <!-- Toasts will be added here dynamically -->
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  
  <script>
    // Configurações do Firebase (substitua com suas credenciais)
    const firebaseConfig = {
      apiKey: "AIzaSyCV809Fi4JTLZclARfU4MtNSAVkJIrGcfk",
      authDomain: "cozinha-da-vivi-83d09.firebaseapp.com",
      projectId: "cozinha-da-vivi-83d09",
      storageBucket: "cozinha-da-vivi-83d09.appspot.com",
      messagingSenderId: "740046409209",
      appId: "1:740046409209:web:f8cff12dc530e22fba4128",
      databaseURL: "https://cozinha-da-vivi-83d09-default-rtdb.europe-west1.firebasedatabase.app"
    };

    // Inicializa o Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Configurações do aplicativo
    const APP_CONFIG = {
      restaurantName: "Cozinha da Vivi",
      restaurantAddress: "Rua das Flores, 123 - Centro",
      areas: {
        'sala-principal': { name: 'Sala Principal', tables: 8, location: 'indoor' },
        'esplanada': { name: 'Esplanada', tables: 6, location: 'outdoor' }
      },
      adminCredentials: {
        username: "garcom",
        password: "cozinhadavivi123"
      }
    };

    // Estado do aplicativo
    let currentTable = null;
    let currentOrder = [];
    let activeOrders = [];
    let currentProductOptions = null;
    let currentArea = 'all';
    let tableConsumption = {};
    let isOnline = navigator.onLine;
    
    // Inicializar modais
    const currentOrderModal = new bootstrap.Modal(document.getElementById('currentOrderModal'));
    const productOptionsModal = new bootstrap.Modal(document.getElementById('productOptionsModal'));
    const kitchenOrderModal = new bootstrap.Modal(document.getElementById('kitchenOrderModal'));
    const tableConsumptionModal = new bootstrap.Modal(document.getElementById('tableConsumptionModal'));

    // Funções utilitárias
    const Utils = {
      formatCurrency: (value) => {
        return value.toLocaleString('pt-PT', { style: 'currency', currency: 'EUR' });
      },
      parsePrice: (priceString) => {
        return parseFloat(priceString.replace("€", "").replace(",", ".").trim());
      },
      animateElement: (element, animation) => {
        element.classList.add("animate__animated", `animate__${animation}`);
        setTimeout(() => {
          element.classList.remove("animate__animated", `animate__${animation}`);
        }, 1000);
      },
      showNotification: (message, type = 'success') => {
        const toastContainer = document.getElementById('toast-container');
        const toastId = 'toast-' + Date.now();
        
        const toast = document.createElement('div');
        toast.id = toastId;
        toast.className = `toast show align-items-center text-white bg-${type} border-0`;
        toast.role = 'alert';
        toast.setAttribute('aria-live', 'assertive');
        toast.setAttribute('aria-atomic', 'true');
        
        toast.innerHTML = `
          <div class="d-flex">
            <div class="toast-body">
              ${message}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
        `;
        
        toastContainer.appendChild(toast);
        
        // Remove toast after 3 seconds
        setTimeout(() => {
          const toastElement = document.getElementById(toastId);
          if (toastElement) {
            toastElement.classList.remove('show');
            setTimeout(() => toastElement.remove(), 150);
          }
        }, 3000);
      },
      getCurrentDateTime: () => {
        const now = new Date();
        return now.toLocaleString('pt-BR');
      },
      generateOrderId: () => {
        return 'ORD-' + Date.now().toString().slice(-6);
      },
      generateTableId: (area, number) => {
        return `${area}-${number}`;
      },
      showLoading: () => {
        document.getElementById('loading-spinner').style.display = 'flex';
      },
      hideLoading: () => {
        document.getElementById('loading-spinner').style.display = 'none';
      },
      checkConnection: () => {
        const offlineIndicator = document.getElementById('offline-indicator');
        if (isOnline) {
          offlineIndicator.style.display = 'none';
        } else {
          offlineIndicator.style.display = 'block';
        }
      }
    };

    // Funções do Firebase
    const FirebaseService = {
      saveOrder: async (order) => {
        try {
          if (!isOnline) {
            Utils.showNotification('Sem conexão. Pedido será enviado quando online.', 'warning');
            return null;
          }
          
          Utils.showLoading();
          const newOrderRef = database.ref('orders').push();
          await newOrderRef.set(order);
          Utils.hideLoading();
          return { ...order, id: newOrderRef.key };
        } catch (error) {
          console.error("Erro ao salvar pedido:", error);
          Utils.hideLoading();
          return null;
        }
      },

      listenForOrders: (callback) => {
        database.ref('orders').on('value', (snapshot) => {
          const ordersData = snapshot.val();
          const ordersArray = ordersData ? Object.keys(ordersData).map(key => ({
            id: key,
            ...ordersData[key]
          })) : [];
          callback(ordersArray);
        });
      },

      updateOrderStatus: async (orderId, newStatus) => {
        try {
          if (!isOnline) {
            Utils.showNotification('Sem conexão. Status será atualizado quando online.', 'warning');
            return false;
          }
          
          Utils.showLoading();
          await database.ref(`orders/${orderId}/status`).set(newStatus);
          Utils.hideLoading();
          return true;
        } catch (error) {
          console.error("Erro ao atualizar status:", error);
          Utils.hideLoading();
          return false;
        }
      },

      getTableConsumption: async (tableId) => {
        try {
          if (!isOnline) {
            return tableConsumption[tableId] || [];
          }
          
          Utils.showLoading();
          const snapshot = await database.ref(`tables/${tableId}/consumption`).once('value');
          Utils.hideLoading();
          return snapshot.val() || [];
        } catch (error) {
          console.error("Erro ao obter consumo da mesa:", error);
          Utils.hideLoading();
          return [];
        }
      },

      updateTableConsumption: async (tableId, consumption) => {
        try {
          if (!isOnline) {
            // Salva localmente e tenta novamente quando online
            tableConsumption[tableId] = consumption;
            Utils.showNotification('Sem conexão. Dados serão salvos localmente.', 'warning');
            return false;
          }
          
          Utils.showLoading();
          await database.ref(`tables/${tableId}/consumption`).set(consumption);
          Utils.hideLoading();
          return true;
        } catch (error) {
          console.error("Erro ao atualizar consumo da mesa:", error);
          Utils.hideLoading();
          return false;
        }
      },

      updateTableStatus: async (tableId, status) => {
        try {
          if (!isOnline) {
            Utils.showNotification('Sem conexão. Status será atualizado quando online.', 'warning');
            return false;
          }
          
          Utils.showLoading();
          await database.ref(`tables/${tableId}/status`).set(status);
          Utils.hideLoading();
          return true;
        } catch (error) {
          console.error("Erro ao atualizar status da mesa:", error);
          Utils.hideLoading();
          return false;
        }
      },
      
      syncLocalData: async () => {
        if (!isOnline) return;
        
        try {
          Utils.showLoading();
          
          // Sincronizar consumo das mesas
          for (const [tableId, consumption] of Object.entries(tableConsumption)) {
            if (consumption && consumption.length > 0) {
              await database.ref(`tables/${tableId}/consumption`).set(consumption);
            }
          }
          
          Utils.hideLoading();
          Utils.showNotification('Dados locais sincronizados com sucesso', 'success');
        } catch (error) {
          console.error("Erro ao sincronizar dados locais:", error);
          Utils.hideLoading();
        }
      }
    };

    // Funções de Pedido
    const Order = {
      create: (tableNumber, items) => {
        const subtotal = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const total = subtotal;
        
        return {
          tableNumber: parseInt(tableNumber),
          items: items.map(item => ({
            name: item.name,
            quantity: item.quantity,
            price: item.price,
            options: item.options || {}
          })),
          subtotal,
          total,
          status: 'pending',
          createdAt: Utils.getCurrentDateTime(),
          updatedAt: Utils.getCurrentDateTime(),
          restaurant: APP_CONFIG.restaurantName
        };
      },

      sendToKitchen: async (tableNumber, items) => {
        try {
          if (items.length === 0) {
            Utils.showNotification('Nenhum item no pedido atual', 'warning');
            return;
          }

          // Filtrar apenas itens que precisam ser enviados para a cozinha
          const kitchenItems = items.filter(item => {
            const productCard = document.querySelector(`.product-card[data-id="${item.id}"]`);
            if (!productCard) return false;
            const category = productCard.dataset.category;
            return ['churrasco', 'burguers', 'combos', 'pratos'].includes(category);
          });

          // Itens que não precisam ser enviados para a cozinha (bebidas, sobremesas)
          const nonKitchenItems = items.filter(item => {
            const productCard = document.querySelector(`.product-card[data-id="${item.id}"]`);
            if (!productCard) return false;
            const category = productCard.dataset.category;
            return ['bebidas', 'sobremesas'].includes(category);
          });

          // Se houver itens para a cozinha, criar o pedido
          if (kitchenItems.length > 0) {
            const order = Order.create(tableNumber, kitchenItems);
            const savedOrder = await FirebaseService.saveOrder(order);
            
            if (savedOrder) {
              Utils.showNotification('Pedido enviado para a cozinha!', 'success');
              
              // Gerar e mostrar comanda da cozinha
              const kitchenOrder = Order.generateKitchenOrder(savedOrder);
              document.getElementById('kitchen-order-content').innerHTML = kitchenOrder;
              kitchenOrderModal.show();
            }
          } else {
            Utils.showNotification('Itens adicionados diretamente à comanda da mesa', 'success');
          }

          // Adicionar todos os itens ao consumo da mesa
          const tableId = Utils.generateTableId(currentArea, tableNumber);
          const currentConsumption = await FirebaseService.getTableConsumption(tableId);
          const updatedConsumption = [...currentConsumption, ...items];
          await FirebaseService.updateTableConsumption(tableId, updatedConsumption);
          
          // Atualizar status da mesa
          await FirebaseService.updateTableStatus(tableId, 'occupied');
        } catch (error) {
          console.error("Erro ao enviar pedido:", error);
          Utils.showNotification('Erro ao enviar pedido para a cozinha', 'danger');
        }
      },

      generateKitchenOrder: (order) => {
        const itemsText = order.items.map(item => `
          <div class="kitchen-order-item">
            <span>${item.quantity}x ${item.name}${item.options && Object.keys(item.options).length > 0 ? ` (${Object.values(item.options).join(', ')})` : ''}</span>
          </div>
        `).join('');
        
        return `
          <div class="kitchen-order" id="kitchen-order-print">
            <div class="kitchen-order-header">
              ${APP_CONFIG.restaurantName}<br>
              Pedido #${order.id.slice(-6)}
            </div>
            
            <div class="kitchen-order-item">
              <span><strong>Mesa:</strong> ${order.tableNumber}</span>
            </div>
            
            <div class="kitchen-order-item">
              <span><strong>Data:</strong> ${order.createdAt}</span>
            </div>
            
            <div style="margin: 10px 0; border-top: 1px dashed #000;"></div>
            
            ${itemsText}
            
            <div class="kitchen-order-footer">
              Total: ${Utils.formatCurrency(order.total)}
            </div>
          </div>
        `;
      },

      updateActiveOrdersUI: (orders) => {
        const ordersContainer = document.getElementById('orders-container');
        
        // Filtrar apenas pedidos ativos (não entregues ou cancelados)
        activeOrders = orders.filter(order => 
          order.status !== 'delivered' && order.status !== 'cancelled'
        ).sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
        
        if (activeOrders.length === 0) {
          ordersContainer.innerHTML = `
            <div class="text-center py-4 text-muted">
              <i class="fas fa-clipboard-list fa-2x mb-3"></i>
              <p>Nenhum pedido ativo no momento</p>
            </div>
          `;
          return;
        }
        
        ordersContainer.innerHTML = '';
        
        activeOrders.forEach(order => {
          const orderElement = document.createElement('div');
          orderElement.className = 'order-card mb-3';
          
          const itemsText = order.items.slice(0, 2).map(item => 
            `${item.quantity}x ${item.name}${item.options && Object.keys(item.options).length > 0 ? ` (${Object.values(item.options).join(', ')})` : ''}`
          ).join(', ');
          
          const moreItems = order.items.length > 2 ? ` +${order.items.length - 2} itens` : '';
          
          orderElement.innerHTML = `
            <div class="order-header">
              <div>
                <span class="fw-bold">Mesa ${order.tableNumber}</span>
                <span class="status-badge ${Order.getStatusClass(order.status)} ms-2">
                  ${Order.getStatusText(order.status)}
                </span>
              </div>
              <div class="text-muted small">${order.createdAt}</div>
            </div>
            <div class="order-body">
              <div class="order-items">
                ${order.items.map(item => `
                  <div class="order-item">
                    <span>${item.quantity}x ${item.name}${item.options && Object.keys(item.options).length > 0 ? ` (${Object.values(item.options).join(', ')})` : ''}</span>
                    <span>${Utils.formatCurrency(item.price * item.quantity)}</span>
                  </div>
                `).join('')}
              </div>
              <div class="order-footer">
                <div class="order-total">Total: ${Utils.formatCurrency(order.total)}</div>
                <div class="order-actions">
                  ${order.status === 'pending' ? `
                    <button class="btn btn-sm btn-success update-status" data-id="${order.id}" data-status="preparing">
                      <i class="fas fa-utensils me-1"></i> Preparar
                    </button>
                  ` : ''}
                  ${order.status === 'preparing' ? `
                    <button class="btn btn-sm btn-primary update-status" data-id="${order.id}" data-status="ready">
                      <i class="fas fa-check me-1"></i> Pronto
                    </button>
                  ` : ''}
                  ${order.status === 'ready' ? `
                    <button class="btn btn-sm btn-success update-status" data-id="${order.id}" data-status="delivered">
                      <i class="fas fa-check-circle me-1"></i> Entregue
                    </button>
                  ` : ''}
                  <button class="btn btn-sm btn-outline-secondary view-kitchen-order" data-id="${order.id}">
                    <i class="fas fa-print me-1"></i> Comanda
                  </button>
                </div>
              </div>
            </div>
          `;
          
          ordersContainer.appendChild(orderElement);
          
          // Adicionar evento para expandir/recolher detalhes
          const header = orderElement.querySelector('.order-header');
          const body = orderElement.querySelector('.order-body');
          
          header.addEventListener('click', () => {
            body.classList.toggle('show');
          });
        });
      },

      updateCurrentOrderUI: () => {
        const orderItemsList = document.getElementById('order-items-list');
        const orderSubtotal = document.getElementById('order-subtotal');
        const orderTotal = document.getElementById('order-total');
        const fabBadge = document.getElementById('fab-badge');
        
        orderItemsList.innerHTML = '';
        
        if (currentOrder.length === 0) {
          orderItemsList.innerHTML = `
            <div class="list-group-item text-center py-4 text-muted">
              <i class="fas fa-shopping-cart fa-2x mb-3"></i>
              <p>Nenhum item no pedido</p>
            </div>
          `;
          document.getElementById('current-order-fab').classList.add('d-none');
        } else {
          currentOrder.forEach((item, index) => {
            const li = document.createElement('div');
            li.className = 'list-group-item';
            
            let optionsText = '';
            if (item.options && Object.keys(item.options).length > 0) {
              optionsText = Object.values(item.options).map(opt => opt.join(', ')).join(' | ');
            }
            
            li.innerHTML = `
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h6 class="mb-1">${item.name}</h6>
                  ${optionsText ? `<small class="text-muted">${optionsText}</small>` : ''}
                </div>
                <div class="d-flex align-items-center gap-2">
                  <div class="btn-group btn-group-sm">
                    <button class="btn btn-outline-secondary decrease-item" data-index="${index}">
                      <i class="fas fa-minus"></i>
                    </button>
                    <span class="px-2">${item.quantity}</span>
                    <button class="btn btn-outline-secondary increase-item" data-index="${index}">
                      <i class="fas fa-plus"></i>
                    </button>
                  </div>
                  <span class="fw-bold">${Utils.formatCurrency(item.price * item.quantity)}</span>
                  <button class="btn btn-outline-danger btn-sm remove-item" data-index="${index}">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            `;
            orderItemsList.appendChild(li);
          });
          
          document.getElementById('current-order-fab').classList.remove('d-none');
          fabBadge.textContent = currentOrder.reduce((sum, item) => sum + item.quantity, 0);
        }
        
        const subtotal = currentOrder.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        orderSubtotal.textContent = Utils.formatCurrency(subtotal);
        orderTotal.textContent = Utils.formatCurrency(subtotal);
        
        // Atualizar contador de itens no header
        document.getElementById('order-count').textContent = 
          currentOrder.reduce((sum, item) => sum + item.quantity, 0) + ' itens';
      },

      getStatusText: (status) => {
        switch(status) {
          case 'pending': return 'Pendente';
          case 'preparing': return 'Em Preparo';
          case 'ready': return 'Pronto';
          case 'delivered': return 'Entregue';
          case 'cancelled': return 'Cancelado';
          default: return status;
        }
      },
      
      getStatusClass: (status) => {
        switch(status) {
          case 'pending': return 'status-pending';
          case 'preparing': return 'status-preparing';
          case 'ready': return 'status-ready';
          case 'delivered': return 'status-delivered';
          case 'cancelled': return 'status-cancelled';
          default: return 'bg-secondary';
        }
      },

      updateStatus: (orderId, newStatus) => {
        FirebaseService.updateOrderStatus(orderId, newStatus).then(success => {
          if (success) {
            Utils.showNotification(`Status do pedido atualizado para ${Order.getStatusText(newStatus)}`, 'success');
            
            // Se o pedido foi entregue, atualizar o consumo da mesa
            if (newStatus === 'delivered') {
              const order = activeOrders.find(o => o.id === orderId);
              if (order) {
                const tableId = Object.keys(tableConsumption).find(id => 
                  id.endsWith(`-${order.tableNumber}`)
                );
                
                if (tableId) {
                  const currentItems = tableConsumption[tableId] || [];
                  const updatedItems = [...currentItems, ...order.items];
                  tableConsumption[tableId] = updatedItems;
                  FirebaseService.updateTableConsumption(tableId, updatedItems);
                }
              }
            }
          }
        });
      }
    };

    // Funções de Mesa
    const Tables = {
      init: () => {
        const tablesContainer = document.getElementById('tables-container');
        tablesContainer.innerHTML = '';
        
        // Criar mesas para cada área
        Object.entries(APP_CONFIG.areas).forEach(([areaId, area]) => {
          for (let i = 1; i <= area.tables; i++) {
            const tableId = Utils.generateTableId(areaId, i);
            const tableElement = document.createElement('div');
            tableElement.className = 'table-card';
            tableElement.dataset.tableNumber = i;
            tableElement.dataset.area = areaId;
            tableElement.dataset.tableId = tableId;
            
            tableElement.innerHTML = `
              <div class="table-number">${i}</div>
              <div class="table-location ${area.location === 'indoor' ? 'location-indoor' : 'location-outdoor'}">
                ${area.location === 'indoor' ? 'Interno' : 'Externo'}
              </div>
              <div class="table-status status-empty">Livre</div>
              <div class="table-consumption d-none"></div>
            `;
            
            tableElement.addEventListener('click', () => {
              Tables.selectTable(i, areaId);
            });
            
            tablesContainer.appendChild(tableElement);
            
            // Inicializar consumo da mesa
            tableConsumption[tableId] = [];
            
            // Carregar consumo existente do Firebase
            FirebaseService.getTableConsumption(tableId).then(consumption => {
              if (consumption && consumption.length > 0) {
                tableConsumption[tableId] = consumption;
                Tables.updateTableConsumptionUI(tableId);
                FirebaseService.updateTableStatus(tableId, 'occupied');
              }
            });
          }
        });
      },
      
      selectTable: (tableNumber, areaId) => {
        // Desselecionar todas as mesas
        document.querySelectorAll('.table-card').forEach(table => {
          table.classList.remove('active');
        });
        
        // Selecionar a mesa clicada
        const tableId = Utils.generateTableId(areaId, tableNumber);
        const selectedTable = document.querySelector(`.table-card[data-table-id="${tableId}"]`);
        
        if (selectedTable) {
          selectedTable.classList.add('active');
          currentTable = tableNumber;
          currentArea = areaId;
          
          document.getElementById('table-number').textContent = tableNumber;
          document.getElementById('modal-table-number').textContent = tableNumber;
          document.getElementById('consumption-table-number').textContent = tableNumber;
          
          // Mostrar/ocultar botão de ver consumo
          const status = selectedTable.querySelector('.table-status').textContent;
          if (status === 'Ocupada') {
            document.getElementById('view-consumption').classList.remove('d-none');
          } else {
            document.getElementById('view-consumption').classList.add('d-none');
          }
          
          // Mostrar seção do cardápio
          document.getElementById('tables-section').classList.add('d-none');
          document.getElementById('menu-section').classList.remove('d-none');
          document.getElementById('active-orders').classList.add('d-none');
          
          // Ativar aba correta no menu mobile
          document.querySelectorAll('.mobile-nav-item').forEach(item => {
            item.classList.remove('active');
          });
          document.querySelector('.mobile-nav-item[data-section="menu"]').classList.add('active');
          
          // Resetar pedido atual
          currentOrder = [];
          Order.updateCurrentOrderUI();
        }
      },
      
      updateTableStatus: (tableId, status) => {
        const tableElement = document.querySelector(`.table-card[data-table-id="${tableId}"]`);
        if (!tableElement) return;
        
        const statusElement = tableElement.querySelector('.table-status');
        if (!statusElement) return;
        
        tableElement.classList.remove('status-empty', 'status-occupied', 'status-paying');
        statusElement.classList.remove('status-empty', 'status-occupied', 'status-paying');
        
        switch(status) {
          case 'empty':
            statusElement.textContent = 'Livre';
            statusElement.classList.add('status-empty');
            tableConsumption[tableId] = [];
            Tables.updateTableConsumptionUI(tableId);
            document.getElementById('view-consumption').classList.add('d-none');
            break;
          case 'occupied':
            statusElement.textContent = 'Ocupada';
            statusElement.classList.add('status-occupied');
            document.getElementById('view-consumption').classList.remove('d-none');
            break;
          case 'paying':
            statusElement.textContent = 'Pagando';
            statusElement.classList.add('status-paying');
            break;
        }
      },
      
      updateTableConsumptionUI: (tableId) => {
        const tableElement = document.querySelector(`.table-card[data-table-id="${tableId}"]`);
        if (!tableElement) return;
        
        const consumptionElement = tableElement.querySelector('.table-consumption');
        const items = tableConsumption[tableId] || [];
        
        if (items.length > 0) {
          consumptionElement.classList.remove('d-none');
          
          // Agrupar itens iguais
          const groupedItems = {};
          items.forEach(item => {
            const key = `${item.name}-${JSON.stringify(item.options)}`;
            if (!groupedItems[key]) {
              groupedItems[key] = { ...item, quantity: 0 };
            }
            groupedItems[key].quantity += item.quantity;
          });
          
          const totalItems = Object.values(groupedItems).reduce((sum, item) => sum + item.quantity, 0);
          const totalValue = Object.values(groupedItems).reduce((sum, item) => sum + (item.price * item.quantity), 0);
          
          consumptionElement.innerHTML = `
            <span class="consumption-badge">${totalItems} itens</span>
            <span class="consumption-badge">${Utils.formatCurrency(totalValue)}</span>
          `;
        } else {
          consumptionElement.classList.add('d-none');
          consumptionElement.innerHTML = '';
        }
      },
      
      showTableConsumption: async (tableId) => {
        try {
          const consumption = tableConsumption[tableId] || [];
          const consumptionList = document.getElementById('table-consumption-list');
          
          if (consumption.length === 0) {
            consumptionList.innerHTML = `
              <div class="empty-state">
                <i class="fas fa-clipboard-list fa-2x"></i>
                <p>Nenhum item consumido nesta mesa</p>
              </div>
            `;
            document.getElementById('table-consumption-total').textContent = '€ 0,00';
          } else {
            // Agrupar itens iguais
            const groupedItems = {};
            consumption.forEach(item => {
              const key = `${item.name}-${JSON.stringify(item.options)}`;
              if (!groupedItems[key]) {
                groupedItems[key] = { ...item, quantity: 0 };
              }
              groupedItems[key].quantity += item.quantity;
            });
            
            consumptionList.innerHTML = '';
            
            Object.values(groupedItems).forEach((item, index) => {
              const itemElement = document.createElement('div');
              itemElement.className = 'consumption-item';
              
              let optionsText = '';
              if (item.options && Object.keys(item.options).length > 0) {
                optionsText = Object.values(item.options).map(opt => opt.join(', ')).join(' | ');
              }
              
              itemElement.innerHTML = `
                <div>
                  <strong>${item.quantity}x ${item.name}</strong>
                  ${optionsText ? `<div class="small text-muted">${optionsText}</div>` : ''}
                  <div class="small">${Utils.formatCurrency(item.price * item.quantity)}</div>
                </div>
                <div class="consumption-item-actions">
                  <button class="btn btn-sm btn-outline-danger remove-consumption-item" data-index="${index}">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              `;
              
              consumptionList.appendChild(itemElement);
            });
            
            const totalValue = Object.values(groupedItems).reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('table-consumption-total').textContent = Utils.formatCurrency(totalValue);
          }
          
          tableConsumptionModal.show();
        } catch (error) {
          console.error("Erro ao mostrar consumo da mesa:", error);
          Utils.showNotification('Erro ao carregar consumo da mesa', 'danger');
        }
      },
      
      closeTable: async (tableId) => {
        try {
          // Limpar consumo da mesa
          tableConsumption[tableId] = [];
          await FirebaseService.updateTableConsumption(tableId, []);
          await FirebaseService.updateTableStatus(tableId, 'empty');
          
          Tables.updateTableConsumptionUI(tableId);
          tableConsumptionModal.hide();
          
          Utils.showNotification('Mesa fechada com sucesso', 'success');
        } catch (error) {
          console.error("Erro ao fechar mesa:", error);
          Utils.showNotification('Erro ao fechar mesa', 'danger');
        }
      }
    };

    // Funções de Produto
    const Product = {
      addToCurrentOrder: (id, name, price, image = '', options = {}) => {
        const existingItem = currentOrder.find(item => 
          item.id === id && JSON.stringify(item.options) === JSON.stringify(options)
        );
        
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          currentOrder.push({ id, name, price, quantity: 1, image, options });
        }
        
        Order.updateCurrentOrderUI();
        
        const productElement = document.querySelector(`.product-card[data-id="${id}"]`);
        if (productElement) {
          Utils.animateElement(productElement, 'pulse');
          
          // Muda o botão para "Adicionado" e cor verde
          const addButton = productElement.querySelector('.add-to-cart');
          if (addButton) {
            addButton.innerHTML = '<i class="fas fa-check me-1"></i> Adicionado';
            addButton.classList.add('added');
            
            // Retorna ao estado original após 2 segundos
            setTimeout(() => {
              addButton.innerHTML = '<i class="fas fa-plus me-1"></i> Add';
              addButton.classList.remove('added');
            }, 2000);
          }
        }
      },
      
      showOptions: (productId, productName) => {
        let optionsHtml = '';
        let basePrice = 0;
        
        // Identifica o tipo de produto
        const isChurrascoItem = ['101', '102', '103', '104'].includes(productId);
        const isAcaiItem = ['601', '602'].includes(productId);

        // Opções para Churrasco
        if (isChurrascoItem) {
          basePrice = productId === "101" ? 12.00 : 
                     productId === "102" ? 13.00 : 
                     productId === "103" ? 12.00 : 
                     productId === "104" ? 12.00 : 0;
          
          optionsHtml = `
            <div class="option-section">
              <div class="option-section-title">Feijão <span class="required-option">*</span></div>
              <div class="option-item">
                <label>
                  <input type="radio" name="feijao" value="Feijão de caldo" required>
                  Feijão de caldo
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="radio" name="feijao" value="Feijão tropeiro" required>
                  Feijão tropeiro
                </label>
              </div>
              <div class="max-selection">Selecione uma opção</div>
            </div>
            
            <div class="option-section">
              <div class="option-section-title">Acompanhamentos <span class="required-option">*</span></div>
              <div class="option-item">
                <label>
                  <input type="radio" name="acompanhamento" value="Banana frita" required>
                  Banana frita
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="radio" name="acompanhamento" value="Batata frita" required>
                  Batata frita
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="radio" name="acompanhamento" value="Mandioca cozida" required>
                  Mandioca cozida
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="radio" name="acompanhamento" value="Mandioca frita" required>
                  Mandioca frita
                </label>
              </div>
              <div class="max-selection">Selecione uma opção</div>
            </div>
          `;
          
          // Seções específicas para cada tipo de item
          if (productId === "101") { // Churrasco Misto
            optionsHtml += `
              <div class="option-section" id="carnes-section">
                <div class="option-section-title">Carnes <span class="required-option">*</span></div>
                <div class="option-item">
                  <label>
                    <input type="checkbox" name="carnes" value="Coração de galinha" data-max="2">
                    Coração de galinha
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="checkbox" name="carnes" value="Costelinha de porco" data-max="2">
                    Costelinha de porco
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="checkbox" name="carnes" value="Filé de frango" data-max="2">
                    Filé de frango
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="checkbox" name="carnes" value="Linguiça" data-max="2">
                    Linguiça
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="checkbox" name="carnes" value="Maminha (+1€)" data-additional-price="1" data-exclusive>
                    Maminha <span class="additional-price">+€1,00</span>
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="checkbox" name="carnes" value="Torresmo" data-max="2">
                    Torresmo
                  </label>
                </div>
                <div class="max-selection" id="max-carnes">Escolha até 2 carnes (ou somente Maminha)</div>
              </div>
              
              <div class="option-section" id="ponto-carne-section" style="display:none;">
                <div class="option-section-title">Ponto da Carne <span class="required-option">*</span></div>
                <div class="option-item">
                  <label>
                    <input type="radio" name="ponto_carne" value="Selada" required>
                    Selada
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="radio" name="ponto_carne" value="Mal passada" required>
                    Mal passada
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="radio" name="ponto_carne" value="Ao ponto" required>
                    Ao ponto
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="radio" name="ponto_carne" value="Ao ponto para bem" required>
                    Ao ponto para bem
                  </label>
                </div>
                <div class="option-item">
                  <label>
                    <input type="radio" name="ponto_carne" value="Bem passado" required>
                    Bem passado
                  </label>
                </div>
                <div class="max-selection">Selecione uma opção</div>
              </div>
            `;
          }
          
          // Opções comuns para salada
          optionsHtml += `
            <div class="option-section">
              <div class="option-section-title">Salada <span class="required-option">*</span></div>
              <div class="option-item">
                <label>
                  <input type="radio" name="salada" value="Salada mista" required>
                  Salada mista (Alface, tomate, pepino, cebola, e salsa)
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="radio" name="salada" value="Vinagrete" required>
                  Vinagrete
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="radio" name="salada" value="Não quero salada" required>
                  Não quero salada
                </label>
              </div>
              <div class="max-selection">Selecione uma opção</div>
            </div>
          `;
        } 
        // Opções para Açaí
        else if (isAcaiItem) {
          basePrice = productId === "601" ? 6.00 : 10.00;
          
          optionsHtml = `
            <div class="option-section">
              <div class="option-section-title">Escolha seus acompanhamentos</div>
              <div class="option-item">
                <label>
                  <input type="checkbox" name="acompanhamentos" value="Granola">
                  Granola
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="checkbox" name="acompanhamentos" value="Leite condensado">
                  Leite condensado
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="checkbox" name="acompanhamentos" value="Banana">
                  Banana
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="checkbox" name="acompanhamentos" value="Morango">
                  Morango
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="checkbox" name="acompanhamentos" value="Leite Ninho">
                  Leite Ninho
                </label>
              </div>
            </div>
            
            <div class="option-section">
              <div class="option-section-title">Ou selecione:</div>
              <div class="option-item">
                <label>
                  <input type="radio" name="opcao_açai" value="completo" onclick="selectAllAçaiToppings()">
                  Quero Completo (todos os acompanhamentos)
                </label>
              </div>
              <div class="option-item">
                <label>
                  <input type="radio" name="opcao_açai" value="personalizado" checked>
                  Personalizado (escolher acompanhamentos)
                </label>
              </div>
            </div>
          `;
        } 
        else {
          // Opções padrão para outros produtos
          optionsHtml = `
            <div class="option-section">
              <div class="option-section-title">Observações</div>
              <div class="option-item">
                <textarea class="form-control" id="observacoes" rows="3" placeholder="Alguma observação sobre este item?"></textarea>
              </div>
            </div>
          `;
        }
        
        document.getElementById('productOptionsModalTitle').textContent = `Opções: ${productName}`;
        document.getElementById('product-options-content').innerHTML = optionsHtml;
        
        currentProductOptions = {
          id: productId,
          name: productName,
          price: basePrice,
          image: document.querySelector(`.product-card[data-id="${productId}"] .product-image`)?.src || ''
        };
        
        // Adiciona eventos para controlar a seleção máxima
        if (isChurrascoItem && productId === "101") {
          const carnesSection = document.getElementById('carnes-section');
          const carnesCheckboxes = carnesSection.querySelectorAll('input[type="checkbox"]');
          const maxMessage = carnesSection.querySelector('.max-selection');
          
          carnesCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', function() {
              const isExclusive = this.hasAttribute('data-exclusive');
              const checkedCount = Array.from(carnesCheckboxes)
                  .filter(cb => cb.checked && !cb.hasAttribute('data-exclusive')).length;
              
              if (isExclusive && this.checked) {
                // Se selecionou Maminha (opção exclusiva)
                // Desmarca e desabilita todas as outras carnes
                carnesCheckboxes.forEach(cb => {
                  if (cb !== this) {
                    cb.checked = false;
                    cb.disabled = true;
                    cb.closest('.option-item').classList.add('disabled');
                  }
                });
                
                // Mostra a seção de ponto da carne
                document.getElementById('ponto-carne-section').style.display = 'block';
                maxMessage.textContent = "Opção 'Maminha' selecionada";
              } 
              else if (this.checked && checkedCount >= 2) {
                // Se selecionou 2 carnes normais
                // Desabilita as não selecionadas
                carnesCheckboxes.forEach(cb => {
                  if (!cb.checked && !cb.hasAttribute('data-exclusive')) {
                    cb.disabled = true;
                    cb.closest('.option-item').classList.add('disabled');
                  }
                });
                maxMessage.textContent = "Máximo de 2 carnes selecionadas";
              } 
              else {
                // Reativa todas as opções (exceto se Maminha estiver selecionada)
                const maminhaSelected = Array.from(carnesCheckboxes)
                    .some(cb => cb.hasAttribute('data-exclusive') && cb.checked);
                
                if (!maminhaSelected) {
                  carnesCheckboxes.forEach(cb => {
                    cb.disabled = false;
                    cb.closest('.option-item').classList.remove('disabled');
                  });
                  
                  // Atualiza mensagem
                  if (checkedCount === 0) {
                    maxMessage.textContent = "Escolha até 2 carnes (ou somente Maminha)";
                  } else {
                    maxMessage.textContent = `Selecionado: ${checkedCount}/2 carnes`;
                  }
                  
                  // Esconde a seção de ponto da carne
                  document.getElementById('ponto-carne-section').style.display = 'none';
                }
              }
              
              maxMessage.style.display = 'block';
            });
          });
        }
        
        // Validação de campos obrigatórios
        const requiredSections = document.querySelectorAll('.option-section [required]');
        requiredSections.forEach(section => {
          section.addEventListener('change', function() {
            const sectionContainer = this.closest('.option-section');
            const maxMessage = sectionContainer.querySelector('.max-selection');
            
            if (this.type === 'checkbox' || this.type === 'radio') {
              const selected = sectionContainer.querySelector('input:checked');
              if (selected) {
                maxMessage.style.display = 'none';
                sectionContainer.classList.remove('required-field');
              } else {
                maxMessage.style.display = 'block';
                maxMessage.textContent = 'Selecione uma opção';
                sectionContainer.classList.add('required-field');
              }
            }
          });
        });
        
        productOptionsModal.show();
      },
      
      confirmOptions: () => {
        // Validação de campos obrigatórios
        const requiredSections = document.querySelectorAll('.option-section [required]');
        let isValid = true;
        
        requiredSections.forEach(section => {
          const sectionContainer = section.closest('.option-section');
          if (sectionContainer.style.display !== 'none') {
            const maxMessage = sectionContainer.querySelector('.max-selection');
            
            if (section.type === 'checkbox' || section.type === 'radio') {
              const selected = sectionContainer.querySelector('input:checked');
              if (!selected) {
                maxMessage.style.display = 'block';
                sectionContainer.classList.add('required-field');
                isValid = false;
              }
            }
          }
        });
        
        if (!isValid) {
          Utils.showNotification('Por favor, selecione todas as opções obrigatórias', 'danger');
          return;
        }
        
        // Coletar todas as opções selecionadas
        const options = {};
        
        // Lógica específica para Açaí
        if (currentProductOptions.id === "601" || currentProductOptions.id === "602") {
          const opcaoCompleta = document.querySelector('input[name="opcao_açai"]:checked').value === "completo";
          const acompanhamentos = [];
          
          if (opcaoCompleta) {
            // Adiciona todos os acompanhamentos
            acompanhamentos.push("Granola", "Leite condensado", "Banana", "Morango", "Leite Ninho");
          } else {
            // Adiciona apenas os selecionados
            const selected = document.querySelectorAll('input[name="acompanhamentos"]:checked');
            selected.forEach(input => {
              acompanhamentos.push(input.value);
            });
          }
          
          options["Acompanhamentos"] = acompanhamentos.length > 0 ? acompanhamentos : ["Sem acompanhamentos"];
        } 
        else {
          // Lógica para outros produtos
          const sections = document.querySelectorAll('.option-section');
          
          sections.forEach(section => {
            const title = section.querySelector('.option-section-title')?.textContent.replace(' *', '');
            const inputs = section.querySelectorAll('input:checked');
            
            if (inputs.length > 0 && title) {
              options[title] = Array.from(inputs).map(input => {
                const additionalPrice = input.getAttribute('data-additional-price') || 0;
                if (additionalPrice) {
                  currentProductOptions.price += parseFloat(additionalPrice);
                }
                return input.value;
              });
            }
          });
        }
        
        // Adicionar ao pedido atual com as opções
        Product.addToCurrentOrder(
          currentProductOptions.id,
          currentProductOptions.name,
          currentProductOptions.price,
          currentProductOptions.image,
          options
        );
        
        // Resetar o produto atual e fechar o modal
        currentProductOptions = null;
        productOptionsModal.hide();
      }
    };

    // Funções de Filtro
    const Filter = {
      applyAreaFilter: (area) => {
        const tables = document.querySelectorAll('.table-card');
        currentArea = area;
        
        tables.forEach(table => {
          if (area === 'all' || table.dataset.area === area) {
            table.style.display = 'block';
            setTimeout(() => {
              table.style.opacity = '1';
            }, 50);
          } else {
            table.style.opacity = '0';
            setTimeout(() => {
              table.style.display = 'none';
            }, 300);
          }
        });
      },
      
      applyCategoryFilter: (category) => {
        const products = document.querySelectorAll('.product-card');
        const tabs = document.querySelectorAll('.category-tab');
        
        products.forEach(product => {
          if (category === 'all' || product.dataset.category === category) {
            product.style.display = 'block';
            setTimeout(() => {
              product.style.opacity = '1';
            }, 50);
          } else {
            product.style.opacity = '0';
            setTimeout(() => {
              product.style.display = 'none';
            }, 300);
          }
        });
        
        tabs.forEach(tab => {
          if (tab.dataset.category === category) {
            tab.classList.add('active');
          } else {
            tab.classList.remove('active');
          }
        });
      }
    };

    // Função auxiliar para selecionar todos os acompanhamentos do açaí
    function selectAllAçaiToppings() {
      const checkboxes = document.querySelectorAll('input[name="acompanhamentos"]');
      checkboxes.forEach(checkbox => {
        checkbox.checked = true;
      });
    }

    // Event Listeners
    function setupEventListeners() {
      // Navegação Mobile
      document.querySelectorAll('.mobile-nav-item').forEach(item => {
        item.addEventListener('click', (e) => {
          e.preventDefault();
          const section = item.getAttribute('data-section');
          
          // Ativar item clicado
          document.querySelectorAll('.mobile-nav-item').forEach(navItem => {
            navItem.classList.remove('active');
          });
          item.classList.add('active');
          
          // Mostrar seção correspondente
          document.getElementById('tables-section').classList.add('d-none');
          document.getElementById('menu-section').classList.add('d-none');
          document.getElementById('active-orders').classList.add('d-none');
          
          if (section === 'tables') {
            document.getElementById('tables-section').classList.remove('d-none');
          } else if (section === 'menu') {
            if (!currentTable) {
              Utils.showNotification('Selecione uma mesa primeiro', 'warning');
              document.querySelector('.mobile-nav-item[data-section="tables"]').click();
              return;
            }
            document.getElementById('menu-section').classList.remove('d-none');
          } else if (section === 'orders') {
            document.getElementById('active-orders').classList.remove('d-none');
          }
        });
      });
      
      // Botão Voltar para Mesas
      document.getElementById('back-to-tables').addEventListener('click', () => {
        document.getElementById('menu-section').classList.add('d-none');
        document.getElementById('tables-section').classList.remove('d-none');
        document.getElementById('active-orders').classList.add('d-none');
        
        // Ativar aba de mesas no menu mobile
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.classList.remove('active');
        });
        document.querySelector('.mobile-nav-item[data-section="tables"]').classList.add('active');
      });
      
      // Botão Atualizar Pedidos
      document.getElementById('refresh-orders').addEventListener('click', () => {
        FirebaseService.listenForOrders(Order.updateActiveOrdersUI);
        Utils.showNotification('Pedidos atualizados', 'info');
      });
      
      // Botão Atualizar Mesas
      document.getElementById('refresh-tables').addEventListener('click', () => {
        Tables.init();
        Utils.showNotification('Mesas atualizadas', 'info');
      });
      
      // Botão Ver Consumo (na lista de mesas)
      document.getElementById('view-consumption').addEventListener('click', () => {
        if (currentTable && currentArea) {
          const tableId = Utils.generateTableId(currentArea, currentTable);
          Tables.showTableConsumption(tableId);
        }
      });
      
      // Botão Ver Consumo (no menu)
      document.getElementById('view-current-consumption').addEventListener('click', () => {
        if (currentTable && currentArea) {
          const tableId = Utils.generateTableId(currentArea, currentTable);
          Tables.showTableConsumption(tableId);
        }
      });
      
      // Botão Adicionar Itens ao Consumo da Mesa
      document.getElementById('add-items-to-table').addEventListener('click', () => {
        tableConsumptionModal.hide();
        document.getElementById('menu-section').classList.remove('d-none');
        document.getElementById('tables-section').classList.add('d-none');
        document.getElementById('active-orders').classList.add('d-none');
        
        // Ativar aba de menu no mobile
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
          item.classList.remove('active');
        });
        document.querySelector('.mobile-nav-item[data-section="menu"]').classList.add('active');
      });
      
      // Botão Fechar Mesa
      document.getElementById('close-table').addEventListener('click', () => {
        if (currentTable && currentArea) {
          const tableId = Utils.generateTableId(currentArea, currentTable);
          Tables.closeTable(tableId);
        }
      });
      
      // Botão Adicionar ao Pedido
      document.addEventListener('click', (event) => {
        if (event.target.closest('.add-to-cart')) {
          const button = event.target.closest('.add-to-cart');
          const productCard = button.closest('.product-card');
          
          if (productCard) {
            const id = productCard.getAttribute("data-id");
            const nameElement = productCard.querySelector(".product-name");
            const priceElement = productCard.querySelector(".product-price");
            const imageElement = productCard.querySelector(".product-image");
            
            if (nameElement && priceElement) {
              const name = nameElement.textContent;
              const price = Utils.parsePrice(priceElement.textContent);
              const image = imageElement?.src || '';
              
              if (productCard.getAttribute('data-has-options') === 'true') {
                Product.showOptions(id, name);
              } else {
                Product.addToCurrentOrder(id, name, price, image);
              }
            }
          }
        }
      });
      
      // Botão FAB do Pedido Atual
      document.getElementById('current-order-fab').addEventListener('click', () => {
        currentOrderModal.show();
      });
      
      // Botão Enviar para Cozinha
      document.getElementById('send-to-kitchen').addEventListener('click', () => {
        if (currentTable && currentArea) {
          Order.sendToKitchen(currentTable, currentOrder);
          currentOrder = [];
          Order.updateCurrentOrderUI();
          currentOrderModal.hide();
        }
      });
      
      // Botão Cancelar Pedido
      document.getElementById('cancel-order').addEventListener('click', () => {
        currentOrder = [];
        Order.updateCurrentOrderUI();
        currentOrderModal.hide();
        Utils.showNotification('Pedido cancelado', 'info');
      });
      
      // Manipulação de itens no pedido atual
      document.addEventListener('click', (event) => {
        // Remover item do pedido
        if (event.target.closest('.remove-item')) {
          const index = parseInt(event.target.closest('.remove-item').getAttribute("data-index"));
          currentOrder.splice(index, 1);
          Order.updateCurrentOrderUI();
        }
        
        // Aumentar quantidade
        if (event.target.closest('.increase-item')) {
          const index = parseInt(event.target.closest('.increase-item').getAttribute("data-index"));
          currentOrder[index].quantity += 1;
          Order.updateCurrentOrderUI();
        }
        
        // Diminuir quantidade
        if (event.target.closest('.decrease-item')) {
          const index = parseInt(event.target.closest('.decrease-item').getAttribute("data-index"));
          if (currentOrder[index].quantity > 1) {
            currentOrder[index].quantity -= 1;
          } else {
            currentOrder.splice(index, 1);
          }
          Order.updateCurrentOrderUI();
        }
      });
      
      // Botões de Área
      document.querySelectorAll('.area-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.area-tab').forEach(c => c.classList.remove('active'));
          tab.classList.add('active');
          Filter.applyAreaFilter(tab.dataset.area);
        });
      });
      
      // Botões de Categoria
      document.querySelectorAll('.category-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.category-tab').forEach(c => c.classList.remove('active'));
          tab.classList.add('active');
          Filter.applyCategoryFilter(tab.dataset.category);
        });
      });
      
      // Botão Confirmar Opções do Produto
      document.getElementById('confirm-product-options').addEventListener('click', () => {
        Product.confirmOptions();
      });
      
      // Botão Imprimir Comanda
      document.getElementById('print-kitchen-order').addEventListener('click', () => {
        const printContent = document.getElementById('kitchen-order-content').innerHTML;
        const originalContent = document.body.innerHTML;
        
        document.body.innerHTML = printContent;
        window.print();
        document.body.innerHTML = originalContent;
        
        // Fechar o modal após imprimir
        kitchenOrderModal.hide();
        
        // Restaurar eventos após imprimir
        setupEventListeners();
      });
      
      // Atualizar status do pedido
      document.addEventListener('click', (event) => {
        if (event.target.closest('.update-status')) {
          const button = event.target.closest('.update-status');
          const orderId = button.getAttribute('data-id');
          const newStatus = button.getAttribute('data-status');
          Order.updateStatus(orderId, newStatus);
        }
        
        if (event.target.closest('.view-kitchen-order')) {
          const button = event.target.closest('.view-kitchen-order');
          const orderId = button.getAttribute('data-id');
          const order = activeOrders.find(o => o.id === orderId);
          if (order) {
            const kitchenOrder = Order.generateKitchenOrder(order);
            document.getElementById('kitchen-order-content').innerHTML = kitchenOrder;
            kitchenOrderModal.show();
          }
        }
        
        if (event.target.closest('.remove-consumption-item')) {
          const button = event.target.closest('.remove-consumption-item');
          const index = parseInt(button.getAttribute('data-index'));
          const tableId = Utils.generateTableId(currentArea, currentTable);
          
          if (tableConsumption[tableId]) {
            tableConsumption[tableId].splice(index, 1);
            FirebaseService.updateTableConsumption(tableId, tableConsumption[tableId]);
            Tables.showTableConsumption(tableId);
            Tables.updateTableConsumptionUI(tableId);
          }
        }
      });
      
      // Verificar conexão
      window.addEventListener('online', () => {
        isOnline = true;
        Utils.checkConnection();
        FirebaseService.syncLocalData();
      });
      
      window.addEventListener('offline', () => {
        isOnline = false;
        Utils.checkConnection();
      });
      
      // Swipe para navegação
      let touchStartX = 0;
      let touchEndX = 0;
      
      document.addEventListener('touchstart', (e) => {
        touchStartX = e.changedTouches[0].screenX;
      }, false);
      
      document.addEventListener('touchend', (e) => {
        touchEndX = e.changedTouches[0].screenX;
        handleSwipe();
      }, false);
      
      function handleSwipe() {
        const threshold = 50; // Mínimo de pixels para considerar um swipe
        
        if (touchEndX < touchStartX - threshold) {
          // Swipe para esquerda - próxima seção
          const currentActive = document.querySelector('.mobile-nav-item.active');
          if (currentActive) {
            const nextItem = currentActive.nextElementSibling || 
                            document.querySelector('.mobile-nav-item:first-child');
            if (nextItem) nextItem.click();
          }
        }
        
        if (touchEndX > touchStartX + threshold) {
          // Swipe para direita - seção anterior
          const currentActive = document.querySelector('.mobile-nav-item.active');
          if (currentActive) {
            const prevItem = currentActive.previousElementSibling || 
                            document.querySelector('.mobile-nav-item:last-child');
            if (prevItem) prevItem.click();
          }
        }
      }
    }

    // Inicialização
    document.addEventListener('DOMContentLoaded', () => {
      Tables.init();
      Filter.applyAreaFilter('all');
      Filter.applyCategoryFilter('all');
      setupEventListeners();
      
      // Ouvir atualizações de pedidos
      FirebaseService.listenForOrders(Order.updateActiveOrdersUI);
      
      // Verificar conexão inicial
      Utils.checkConnection();
      
      // Verificar se há um pedido em andamento no localStorage
      const savedOrder = localStorage.getItem('currentOrder');
      if (savedOrder) {
        currentOrder = JSON.parse(savedOrder);
        Order.updateCurrentOrderUI();
      }
      
      // Salvar pedido atual no localStorage quando a página for fechada
      window.addEventListener('beforeunload', () => {
        localStorage.setItem('currentOrder', JSON.stringify(currentOrder));
      });
    });
  </script>
</body>
</html>