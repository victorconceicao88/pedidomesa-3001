<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Faça seu pedido online no Restaurante Cozinha da Vivi - Comida caseira de qualidade">
  <title>Cozinha da Vivi - Pedido Online</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <style>
    :root {
      --primary-color: #ff6b6b;
      --secondary-color: #ffa502;
      --dark-color: #2f3542;
      --light-color: #f1f2f6;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f8f9fa;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .main-content {
      flex: 1;
    }
    
    /* Navbar Fixo */
    .main-header {
      position: sticky;
      top: 0;
      z-index: 1030;
      background-color: var(--dark-color);
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .navbar-container {
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }
    
    /* Categorias melhoradas */
    .filter-buttons {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 10px;
      scrollbar-width: none; /* Firefox */
    }
    
    .filter-buttons::-webkit-scrollbar {
      display: none; /* Chrome, Safari, Opera */
    }
    
    .filter-btn {
      white-space: nowrap;
      border-radius: 20px;
      padding: 0.5rem 1rem;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.3s ease;
      border: 1px solid #dee2e6;
      background-color: white;
      color: var(--dark-color);
    }
    
    .filter-btn.active {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(255, 107, 107, 0.2);
    }
    
    .filter-btn:hover {
      background-color: #f8f9fa;
    }
    
    .filter-btn.active:hover {
      background-color: #ff5252;
    }
    
    .product {
      transition: all 0.3s ease;
      cursor: pointer;
      border-radius: 10px;
      overflow: hidden;
    }
    
    .product:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
    }
    
    .product-image {
      height: 180px;
      object-fit: cover;
      transition: transform 0.3s;
    }
    
    .product:hover .product-image {
      transform: scale(1.03);
    }
    
    .add-to-cart {
      background-color: var(--primary-color);
      border: none;
      transition: all 0.3s;
    }
    
    .add-to-cart:hover {
      background-color: #ff5252;
      transform: scale(1.05);
    }
    
    .card-header {
      background-color: var(--primary-color) !important;
    }
    
    .remove-item {
      transition: all 0.3s;
    }
    
    .remove-item:hover {
      transform: scale(1.1);
    }
    
    .btn-primary {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }
    
    .btn-primary:hover {
      background-color: #ff5252;
      border-color: #ff5252;
    }
    
    #checkout-button {
      transition: all 0.3s;
      background-color: var(--primary-color);
      border: none;
    }
    
    #checkout-button:hover {
      background-color: #ff5252;
      transform: translateY(-2px);
    }
    
    #checkout-button:disabled {
      background-color: #adb5bd;
    }
    
    .badge.bg-primary {
      background-color: var(--primary-color) !important;
    }
    
    .badge.bg-success {
      background-color: #20c997 !important;
    }
    
    .sticky-top {
      top: 1rem;
    }
    
    footer {
      background-color: var(--dark-color) !important;
    }
    
    .text-primary {
      color: var(--primary-color) !important;
    }
    
    .quantity-control {
      display: flex;
      align-items: center;
    }
    
    .quantity-btn {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--light-color);
      border: none;
      cursor: pointer;
    }
    
    .quantity-input {
      width: 40px;
      text-align: center;
      border: none;
      background: transparent;
      font-weight: bold;
    }
    
    .cart-item-quantity {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .empty-cart-icon {
      font-size: 3rem;
      opacity: 0.2;
    }
    
    /* Checkout Page Styles */
    .checkout-container {
      max-width: 800px;
      margin: 0 auto;
    }
    
    .checkout-step {
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid #eee;
    }
    
    .checkout-step:last-child {
      border-bottom: none;
    }
    
    .delivery-option-card {
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
      border-radius: 8px;
    }
    
    .delivery-option-card:hover {
      border-color: var(--primary-color);
    }
    
    .delivery-option-card.active {
      border-color: var(--primary-color);
      background-color: rgba(255, 107, 107, 0.1);
    }
    
    .payment-method-card {
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
      border-radius: 8px;
    }
    
    .payment-method-card:hover {
      border-color: var(--primary-color);
    }
    
    .payment-method-card.active {
      border-color: var(--primary-color);
      background-color: rgba(255, 107, 107, 0.1);
    }
    
    .payment-icon {
      font-size: 1.5rem;
      margin-right: 10px;
      color: var(--primary-color);
    }
    
    .payment-method-label {
      font-weight: 500;
      display: flex;
      align-items: center;
    }
    
    /* Admin Panel Styles */
    .admin-navbar {
      background-color: var(--dark-color);
      position: sticky;
      top: 0;
      z-index: 1020;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .admin-navbar .navbar-brand {
      font-weight: 600;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
    }
    
    .admin-navbar .navbar-brand img {
      margin-right: 10px;
    }
    
    .order-card {
      transition: all 0.3s;
      border-left: 4px solid var(--primary-color);
      margin-bottom: 15px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .order-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .order-status-badge {
      font-size: 0.8rem;
      padding: 0.35em 0.65em;
    }
    
    .status-pending {
      background-color: #ffc107;
    }
    
    .status-preparing {
      background-color: #fd7e14;
    }
    
    .status-ready {
      background-color: #20c997;
    }
    
    .status-delivered {
      background-color: #198754;
    }
    
    .status-cancelled {
      background-color: #dc3545;
    }
    
    /* Kitchen Print Styles */
    .kitchen-order {
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.3;
      padding: 10px;
      max-width: 58mm;
    }
    
    .kitchen-order-header {
      text-align: center;
      font-weight: bold;
      margin-bottom: 10px;
      border-bottom: 1px dashed #000;
      padding-bottom: 5px;
    }
    
    .kitchen-order-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 3px;
    }
    
    .kitchen-order-footer {
      border-top: 1px dashed #000;
      margin-top: 10px;
      padding-top: 5px;
      font-weight: bold;
    }
    
    /* Cart Sidebar Styles */
    .cart-sidebar {
      position: fixed;
      top: 0;
      right: -100%;
      width: 100%;
      max-width: 100%;
      height: 100vh;
      background-color: white;
      z-index: 1050;
      transition: right 0.3s ease;
      box-shadow: -5px 0 15px rgba(0,0,0,0.1);
      overflow-y: auto;
    }
    
    @media (min-width: 768px) {
      .cart-sidebar {
        right: -400px;
        max-width: 400px;
      }
    }
    
    .cart-sidebar.show {
      right: 0;
    }
    
    .cart-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 1040;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
    }
    
    .cart-overlay.show {
      opacity: 1;
      visibility: visible;
    }
    
    /* Cart Icon Styles */
    .cart-icon-container {
      position: relative;
      cursor: pointer;
    }
    
    .cart-icon-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
    }
    
    /* Admin Notification Bell */
    .notification-bell {
      position: relative;
      margin-right: 15px;
      cursor: pointer;
    }
    
    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    /* New Order Notification */
    .new-order-notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: var(--primary-color);
      color: white;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      z-index: 1100;
      display: flex;
      align-items: center;
      animation: slideInUp 0.5s, pulse 2s infinite;
    }
    
    .new-order-notification i {
      margin-right: 10px;
      font-size: 1.2rem;
    }
    
    @keyframes slideInUp {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }
    
    /* Admin Day Tabs */
    .day-tabs {
      display: flex;
      overflow-x: auto;
      padding-bottom: 10px;
      margin-bottom: 15px;
      border-bottom: 1px solid #dee2e6;
    }
    
    .day-tab {
      padding: 8px 15px;
      margin-right: 5px;
      border-radius: 20px;
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.3s;
    }
    
    .day-tab.active {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }
    
    /* Admin Order Accordion */
    .order-accordion {
      margin-bottom: 10px;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      overflow: hidden;
    }
    
    .order-accordion-header {
      cursor: pointer;
      padding: 12px 15px;
      background-color: #f8f9fa;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color 0.2s;
    }
    
    .order-accordion-header:hover {
      background-color: #e9ecef;
    }
    
    .order-accordion-header .date {
      font-weight: 600;
      color: var(--dark-color);
    }
    
    .order-accordion-header .count {
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }
    
    .order-accordion-content {
      background-color: white;
      display: none;
    }
    
    .order-accordion-content.show {
      display: block;
    }
    
    /* Product Options Modal */
    .options-modal .modal-body {
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .option-group {
      margin-bottom: 15px;
      border-bottom: 1px solid #eee;
      padding-bottom: 10px;
    }
    
    .option-group:last-child {
      border-bottom: none;
    }
    
    .option-group-title {
      font-weight: bold;
      margin-bottom: 10px;
    }
    
    .option-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }
    
    /* Highlight for new orders */
    .new-order {
      animation: highlight 2s;
      border-left: 4px solid var(--primary-color) !important;
    }

    @keyframes highlight {
      0% { background-color: rgba(255, 107, 107, 0.3); }
      100% { background-color: transparent; }
    }

    /* Responsive adjustments */
    @media (max-width: 992px) {
      .product-image {
        height: 150px;
      }
      
      .filter-buttons {
        flex-wrap: wrap;
        justify-content: center;
      }
      
      .filter-btn {
        margin-bottom: 5px;
        font-size: 0.8rem;
        padding: 0.25rem 0.5rem;
      }
      
      .checkout-step {
        padding-bottom: 1rem;
        margin-bottom: 1.5rem;
      }
      
      .admin-panel-container {
        padding-top: 10px;
      }
      
      .order-actions .btn {
        margin-bottom: 5px;
        width: 100%;
      }
      
      .payment-method-card {
        margin-bottom: 10px;
      }
      
      .order-accordion-header {
        padding: 10px;
      }
      
      /* Admin panel mobile adjustments */
      .admin-panel-container .row {
        flex-direction: column-reverse;
      }
      
      .admin-panel-container .col-md-3 {
        margin-bottom: 20px;
      }
    }
    
    @media (max-width: 768px) {
      .product-image {
        height: 120px;
      }
      
      .cart-item-quantity {
        flex-direction: column;
        align-items: flex-end;
      }
      
      .checkout-step {
        padding-bottom: 0.75rem;
        margin-bottom: 1rem;
      }
      
      .filter-buttons {
        margin-top: 10px;
      }
      
      .delivery-option-card, .payment-method-card {
        margin-bottom: 10px;
      }
      
      .admin-stats-card .stat-value {
        font-size: 1.2rem;
      }
      
      .admin-navbar .navbar-brand {
        font-size: 1rem;
      }
      
      .order-accordion-header {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .order-accordion-header .count {
        margin-top: 5px;
      }
      
      .new-order-notification {
        width: calc(100% - 40px);
        left: 20px;
        right: auto;
      }
      
      .checkout-container {
        padding: 0 15px;
      }
      
      .card-body {
        padding: 1rem;
      }
    }
    
    @media (max-width: 576px) {
      .product {
        margin-bottom: 15px;
      }
      
      .product-image {
        height: 100px;
      }
      
      .product-name {
        font-size: 1rem;
      }
      
      .product-price {
        font-size: 1rem;
      }
      
      .add-to-cart {
        padding: 0.25rem 0.5rem;
        font-size: 0.8rem;
      }
      
      .checkout-step h3 {
        font-size: 1.1rem;
      }
      
      .delivery-option-card, .payment-method-card {
        padding: 1rem;
      }
      
      .payment-method-label {
        font-size: 0.9rem;
      }
      
      .payment-icon {
        font-size: 1.2rem;
      }
      
      footer .col-md-4 {
        margin-bottom: 1.5rem;
      }
      
      .admin-stats-card .card-body {
        padding: 0.75rem;
      }
      
      .order-card {
        padding: 1rem;
      }
      
      .order-actions .btn {
        font-size: 0.7rem;
        padding: 0.2rem 0.4rem;
      }
      
      .cart-sidebar .card-body {
        padding: 1rem;
      }
      
      #checkout-button, #confirm-order-button {
        padding: 0.75rem;
        font-size: 1rem;
      }
      
      .modal-dialog {
        margin: 0.5rem auto;
      }
    }
    
    /* Admin Panel Improvements */
    .admin-panel-container {
      padding-top: 20px;
    }
    
    .admin-stats-card {
      border-left: 4px solid var(--primary-color);
      margin-bottom: 20px;
    }
    
    .admin-stats-card .card-body {
      padding: 1rem;
    }
    
    .admin-stats-card h5 {
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }
    
    .admin-stats-card .stat-value {
      font-size: 1.5rem;
      font-weight: bold;
    }
    
    .order-actions {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
    }
    
    .order-actions .btn {
      padding: 0.25rem 0.5rem;
      font-size: 0.8rem;
    }
    
    /* Print Styles for Kitchen */
    @media print {
      body * {
        visibility: hidden;
      }
      #kitchen-order-print, #kitchen-order-print * {
        visibility: visible;
      }
      #kitchen-order-print {
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: auto;
      }
    }
    
    /* Hidden admin access button */
    .admin-access-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: var(--dark-color);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      transition: all 0.3s;
    }
    
    .admin-access-btn:hover {
      transform: scale(1.1);
      background-color: var(--primary-color);
    }
    
    /* Product options styling */
    .product-options-container {
      max-height: 400px;
      overflow-y: auto;
      padding: 15px;
    }
    
    .option-section {
      margin-bottom: 20px;
    }
    
    .option-section-title {
      font-weight: bold;
      margin-bottom: 10px;
      color: var(--dark-color);
      border-bottom: 1px solid #eee;
      padding-bottom: 5px;
    }
    
    .option-item {
      margin-bottom: 10px;
    }
    
    .option-item label {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    
    .option-item input[type="checkbox"],
    .option-item input[type="radio"] {
      margin-right: 10px;
    }
    
    .option-price {
      color: var(--primary-color);
      font-weight: bold;
      margin-left: 5px;
    }
    
    /* WhatsApp ready button */
    .whatsapp-ready-btn {
      background-color: #25D366;
      border-color: #25D366;
    }
    
    .whatsapp-ready-btn:hover {
      background-color: #128C7E;
      border-color: #128C7E;
    }
    
    /* MB Way payment icon */
    .mbway-icon {
      color: #9c27b0;
    }

    /* New styles for admin panel */
    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      background-color: var(--dark-color);
      color: white;
    }

    .admin-header h1 {
      font-size: 1.5rem;
      margin: 0;
    }

    .admin-header .timestamp {
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .order-details {
      padding: 15px;
      border-bottom: 1px solid #eee;
    }

    .order-details-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .order-number {
      font-weight: bold;
      color: var(--primary-color);
    }

    .order-date {
      color: #666;
      font-size: 0.9rem;
    }

    .order-customer {
      margin-bottom: 10px;
    }

    .order-items {
      margin: 15px 0;
    }

    .order-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }

    .order-total {
      font-weight: bold;
      text-align: right;
      margin-top: 10px;
    }

    .order-actions-container {
      display: flex;
      gap: 10px;
      margin-top: 15px;
      flex-wrap: wrap;
    }

    .order-actions-container .btn {
      flex: 1;
      min-width: 120px;
    }

    .orders-summary {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid #eee;
    }

    .summary-item {
      text-align: center;
    }

    .summary-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--primary-color);
    }

    .summary-label {
      font-size: 0.9rem;
      color: #666;
    }
  </style>
</head>
<body>
  <!-- Main Navigation -->
  <header class="main-header">
    <div class="container navbar-container">
      <div class="d-flex justify-content-between align-items-center py-3">
        <div id="main-header">
          <h1 class="h3 mb-0 fw-bold"><span class="text-primary">Cozinha</span> da Vivi</h1>
          <p class="mb-0 small text-muted">Comida caseira com amor</p>
        </div>
        <div class="cart-icon-container" id="cart-indicator">
          <i class="fas fa-shopping-bag fa-lg"></i>
          <span id="cart-count" class="cart-icon-badge" style="display: none;">0</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Cart Overlay -->
  <div class="cart-overlay" id="cart-overlay"></div>

  <!-- Cart Sidebar -->
  <div class="cart-sidebar" id="cart-sidebar">
    <div class="card border-0 h-100">
      <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
        <h2 class="h5 mb-0"><i class="fas fa-shopping-bag me-2"></i> Seu Pedido</h2>
        <button class="btn btn-sm btn-outline-light" id="close-cart">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="card-body p-0 d-flex flex-column">
        <div id="cart-items" class="list-group list-group-flush flex-grow-1">
          <div class="list-group-item text-center py-4 empty-cart">
            <i class="fas fa-shopping-bag empty-cart-icon mb-3"></i>
            <p class="mb-0">Seu carrinho está vazio</p>
            <small class="text-muted">Adicione itens para continuar</small>
          </div>
        </div>
        <div class="p-3 border-top">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <span class="text-muted">Subtotal:</span>
            <span id="subtotal" class="fw-bold">R$ 0,00</span>
          </div>
          
          <div class="d-flex justify-content-between align-items-center border-top pt-3">
            <span class="h5 mb-0">Total:</span>
            <span id="total" class="h4 mb-0 text-primary fw-bold">R$ 0,00</span>
          </div>
          
          <button id="checkout-button" class="btn btn-primary w-100 mt-3 py-2 fw-bold" disabled>
            <i class="fas fa-check-circle me-2"></i> Finalizar Pedido
          </button>
          
          <p class="small text-muted mt-2 mb-0 text-center">
            <i class="fas fa-lock me-1"></i> Seus dados estão protegidos
          </p>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Product Section (Visible by default) -->
    <section id="product-section" class="container my-4">
      <div class="row">
        <!-- Seção de Produtos -->
        <section id="products" class="col-12 mb-5">
          <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4">
            <h2 class="h4 fw-bold mb-3 mb-md-0">Nosso Cardápio</h2>
            <div class="btn-group filter-buttons" role="group">
              <button type="button" class="filter-btn btn btn-outline-secondary active" data-category="all">Todos</button>
              <button type="button" class="filter-btn btn btn-outline-secondary" data-category="churrasco">Churrasco</button>
              <button type="button" class="filter-btn btn btn-outline-secondary" data-category="burguers">Burguers</button>
              <button type="button" class="filter-btn btn btn-outline-secondary" data-category="combos">Combos</button>
              <button type="button" class="filter-btn btn btn-outline-secondary" data-category="porcoes">Porções</button>
              <button type="button" class="filter-btn btn btn-outline-secondary" data-category="bebidas">Bebidas</button>
              <button type="button" class="filter-btn btn btn-outline-secondary" data-category="sobremesas">Sobremesas</button>
            </div>
          </div>

          <div class="row g-4" id="product-container">
            <!-- Churrasco Misto -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="101" data-category="churrasco">
                <div class="badge bg-primary position-absolute" style="top: 0.5rem; right: 0.5rem">Mais pedido</div>
                <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=500&auto=format&fit=crop" alt="Churrasco Misto" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Churrasco Misto</h3>
                  <p class="card-text text-muted small">Refeição completa com carnes e acompanhamentos selecionados</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 12,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Maminha -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="102" data-category="churrasco">
                <img src="https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=500&auto=format&fit=crop" alt="Maminha" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Maminha</h3>
                  <p class="card-text text-muted small">Maminha suculenta grelhada na brasa</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 13,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Linguiça Toscana -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="103" data-category="churrasco">
                <img src="https://images.unsplash.com/photo-1603360946369-dc9bb6258143?w=500&auto=format&fit=crop" alt="Linguiça Toscana" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Linguiça Toscana</h3>
                  <p class="card-text text-muted small">Linguiça toscana artesanal grelhada</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 12,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Costelinha de Porco -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="104" data-category="churrasco">
                <img src="https://images.unsplash.com/photo-1606851094291-6efae152fa87?w=500&auto=format&fit=crop" alt="Costelinha de Porco" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Costelinha de Porco</h3>
                  <p class="card-text text-muted small">Costelinha de porco assada lentamente</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 12,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- X-Salada -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="201" data-category="burguers">
                <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=500&auto=format&fit=crop" alt="X-Salada" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">X-Salada</h3>
                  <p class="card-text text-muted small">Pão de hambúrguer, bife de hambúrguer, fiambre, queijo, salada, batata palha e milho.</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 6,50</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- X-Bacon -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="202" data-category="burguers">
                <img src="https://images.unsplash.com/photo-1568901346375-23c9450c58cd?w=500&auto=format&fit=crop" alt="X-Bacon" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">X-Bacon</h3>
                  <p class="card-text text-muted small">Pão, hambúrguer, bacon, queijo, fiambre, ovo, alface, tomate, milho e batata palha.</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 8,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Combo Frango Supreme -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="301" data-category="combos">
                <div class="badge bg-success position-absolute" style="top: 0.5rem; right: 0.5rem">Combo</div>
                <img src="https://images.unsplash.com/photo-1544025162-d76694265947?w=500&auto=format&fit=crop" alt="Combo Frango Supreme" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Combo Frango Supreme</h3>
                  <p class="card-text text-muted small">Sanduíche de frango com batata frita e bebida</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 10,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Combo X-Tudo -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="302" data-category="combos">
                <div class="badge bg-success position-absolute" style="top: 0.5rem; right: 0.5rem">Combo</div>
                <img src="https://images.unsplash.com/photo-1544025162-d76694265947?w=500&auto=format&fit=crop" alt="Combo X-Tudo" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Combo X-Tudo</h3>
                  <p class="card-text text-muted small">Sanduíche completo com batata frita e bebida</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 12,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Porção de Arroz -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="401" data-category="porcoes">
                <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?w=500&auto=format&fit=crop" alt="Porção de Arroz" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Porção de Arroz</h3>
                  <p class="card-text text-muted small">Porção de arroz blanco</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 3,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Coca-Cola (lata) -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="5021" data-category="bebidas">
                <img src="https://images.unsplash.com/photo-1554866585-cd94860890b7?w=500&auto=format&fit=crop" alt="Coca-Cola (lata)" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Coca-Cola (lata)</h3>
                  <p class="card-text text-muted small">Refrigerante Coca-Cola em lata 350ml</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 2,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Açai Pequeno -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="601" data-category="sobremesas">
                <img src="https://images.unsplash.com/photo-1551024506-0bccd828d307?w=500&auto=format&fit=crop" alt="Açai Pequeno" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Açai Pequeno</h3>
                  <p class="card-text text-muted small">Açai cremoso acompanhado com granola, banana, leite em pó e morango</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 6,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Pudim Caseiro -->
            <div class="col-md-6 col-lg-4 col-xl-3">
              <div class="card product h-100 border-0 shadow-sm" data-id="603" data-category="sobremesas">
                <img src="https://images.unsplash.com/photo-1563805042-7684c019e1cb?w=500&auto=format&fit=crop" alt="Pudim Caseiro" class="card-img-top product-image">
                <div class="card-body">
                  <h3 class="h5 card-title product-name">Pudim Caseiro</h3>
                  <p class="card-text text-muted small">Pudim tradicional caseiro com calda de caramelo</p>
                  <div class="d-flex justify-content-between align-items-center mt-3">
                    <span class="h5 mb-0 product-price">R$ 3,00</span>
                    <button class="add-to-cart btn btn-primary rounded-pill px-3">
                      <i class="fas fa-plus me-1"></i> Adicionar
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- Checkout Section (Hidden by default) -->
    <section id="checkout-section" class="container my-4 d-none">
      <div class="checkout-container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <div class="card border-0 shadow-sm mb-4">
              <div class="card-header bg-primary text-white">
                <h2 class="h5 mb-0"><i class="fas fa-shopping-bag me-2"></i> Finalizar Pedido</h2>
              </div>
              <div class="card-body">
                <div class="checkout-step">
                  <h3 class="h5 mb-3">1. Método de Recebimento</h3>
                  <div class="row g-3">
                    <div class="col-md-6">
                      <div class="card delivery-option-card p-3 active" id="delivery-option">
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="delivery-method" id="delivery-method" value="entrega" checked>
                          <label class="form-check-label fw-bold" for="delivery-method">
                            <i class="fas fa-motorcycle me-2"></i> Entrega
                          </label>
                        </div>
                        <p class="small text-muted mt-2">Entregamos no seu endereço (Taxa: R$ 5,00)</p>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="card delivery-option-card p-3" id="pickup-option">
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="delivery-method" id="pickup-method" value="retirada">
                          <label class="form-check-label fw-bold" for="pickup-method">
                            <i class="fas fa-store me-2"></i> Retirada
                          </label>
                        </div>
                        <p class="small text-muted mt-2">Retire seu pedido no restaurante</p>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="checkout-step">
                  <h3 class="h5 mb-3">2. Informações do Cliente</h3>
                  <form id="customer-info-form">
                    <div class="row g-3">
                      <div class="col-md-6">
                        <label for="customer-name" class="form-label">Nome Completo *</label>
                        <input type="text" class="form-control" id="customer-name" required>
                      </div>
                      <div class="col-md-6">
                        <label for="customer-phone" class="form-label">Telefone *</label>
                        <input type="tel" class="form-control" id="customer-phone" required placeholder="Ex: +351 933 737 672">
                      </div>
                      <div class="col-12 delivery-field">
                        <label for="customer-address" class="form-label">Endereço *</label>
                        <input type="text" class="form-control" id="customer-address" placeholder="Rua, Número, Bairro">
                      </div>
                      <div class="col-md-6 delivery-field">
                        <label for="customer-complement" class="form-label">Complemento</label>
                        <input type="text" class="form-control" id="customer-complement" placeholder="Apto, Bloco, Referência">
                      </div>
                      <div class="col-md-6 delivery-field">
                        <label for="customer-neighborhood" class="form-label">Bairro *</label>
                        <input type="text" class="form-control" id="customer-neighborhood">
                      </div>
                      <div class="col-12">
                        <label for="customer-instructions" class="form-label">Instruções para entrega/pedido</label>
                        <textarea class="form-control" id="customer-instructions" rows="2" placeholder="Ex: Portão azul, tocar campainha ou Sem cebola, bem passado"></textarea>
                      </div>
                    </div>
                  </form>
                </div>

                <div class="checkout-step">
                  <h3 class="h5 mb-3">3. Método de Pagamento</h3>
                  <div class="row g-3">
                    <div class="col-md-6">
                      <div class="card payment-method-card p-3 active" id="mbway-payment">
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="payment-method" id="mbway-method" value="mbway" checked>
                          <label class="form-check-label payment-method-label" for="mbway-method">
                            <i class="fas fa-mobile-alt payment-icon mbway-icon"></i> MB Way
                          </label>
                        </div>
                        <p class="small text-muted mt-2">Você receberá uma solicitação de pagamento via MB Way</p>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="card payment-method-card p-3" id="cash-payment">
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="payment-method" id="cash-method" value="dinheiro">
                          <label class="form-check-label payment-method-label" for="cash-method">
                            <i class="fas fa-money-bill-wave payment-icon"></i> Dinheiro
                          </label>
                        </div>
                        <div id="cash-change-field" class="mt-2 d-none">
                          <label for="cash-change" class="form-label small">Valor para troco</label>
                          <input type="text" class="form-control form-control-sm" id="cash-change" placeholder="Ex: 50,00">
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="card payment-method-card p-3" id="card-payment">
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="payment-method" id="card-method" value="cartao">
                          <label class="form-check-label payment-method-label" for="card-method">
                            <i class="fas fa-credit-card payment-icon"></i> Cartão
                          </label>
                        </div>
                        <p class="small text-muted mt-2">Pagamento com máquina na entrega/retirada</p>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="checkout-step">
                  <h3 class="h5 mb-3">4. Resumo do Pedido</h3>
                  <div class="card border-0 shadow-sm">
                    <div class="card-body p-0">
                      <div id="checkout-items" class="list-group list-group-flush">
                        <!-- Itens serão adicionados dinamicamente aqui -->
                      </div>
                      <div class="p-3">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                          <span class="text-muted">Subtotal:</span>
                          <span id="checkout-subtotal" class="fw-bold">R$ 0,00</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-2">
                          <span class="text-muted">Taxa de Entrega:</span>
                          <span id="checkout-delivery-fee" class="fw-bold">R$ 5,00</span>
                        </div>
                        <div class="d-flex justify-content-between align-items-center border-top pt-3">
                          <span class="h5 mb-0">Total:</span>
                          <span id="checkout-total" class="h4 mb-0 text-primary fw-bold">R$ 0,00</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="d-grid gap-2">
                  <button id="confirm-order-button" class="btn btn-primary btn-lg py-3">
                    <i class="fas fa-check-circle me-2"></i> Confirmar Pedido
                  </button>
                  <button id="back-to-cart-button" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-2"></i> Voltar para o Carrinho
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Admin Panel (Hidden by default) -->
    <section id="admin-panel" class="container-fluid px-0 d-none">
      <nav class="navbar navbar-dark admin-navbar">
        <div class="container">
          <a class="navbar-brand" href="#">
            <i class="fas fa-utensils me-2"></i> Portrait Administrativo
          </a>
          <div class="d-flex align-items-center">
            <div class="notification-bell" id="notification-bell">
              <i class="fas fa-bell"></i>
              <span class="notification-badge d-none" id="notification-badge">0</span>
            </div>
            <button id="admin-logout" class="btn btn-outline-light btn-sm">
              <i class="fas fa-sign-out-alt me-1"></i> Sair
            </button>
          </div>
        </div>
      </nav>

      <div class="container admin-panel-container my-4">
        <div class="row">
          <div class="col-md-3">
            <div class="card admin-stats-card mb-4">
              <div class="card-body">
                <h5 class="card-title">Pedidos Hoje</h5>
                <div class="stat-value text-primary" id="today-orders">0</div>
              </div>
            </div>
            
            <div class="card admin-stats-card mb-4">
              <div class="card-body">
                <h5 class="card-title">Em Preparo</h5>
                <div class="stat-value text-warning" id="preparing-orders">0</div>
              </div>
            </div>
            
            <div class="card admin-stats-card mb-4">
              <div class="card-body">
                <h5 class="card-title">Para Entregar</h5>
                <div class="stat-value text-info" id="delivery-orders">0</div>
              </div>
            </div>

            <div class="card">
              <div class="card-body">
                <h3 class="h5 card-title">Filtros</h3>
                <div class="mb-3">
                  <label class="form-label">Status</label>
                  <select class="form-select" id="status-filter">
                    <option value="all">Todos</option>
                    <option value="pending">Pendentes</option>
                    <option value="preparing">Em Preparo</option>
                    <option value="ready">Prontos</option>
                    <option value="delivered">Entregues</option>
                    <option value="cancelled">Cancelados</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="form-label">Tipo</label>
                  <select class="form-select" id="type-filter">
                    <option value="all">Todos</option>
                    <option value="delivery">Entrega</option>
                    <option value="pickup">Retirada</option>
                  </select>
                </div>
                <button id="apply-filters" class="btn btn-primary w-100">
                  <i class="fas fa-filter me-1"></i> Aplicar
                </button>
              </div>
            </div>
          </div>

          <div class="col-md-9">
            <div class="card">
              <div class="card-header bg-white">
                <div class="d-flex justify-content-between align-items-center">
                  <h3 class="h5 mb-0">Pedidos Recentes</h3>
                  <div class="small text-muted" id="last-update">
                    Atualizado: agora
                  </div>
                </div>
              </div>
              <div class="card-body p-0">
                <div class="day-tabs" id="day-tabs">
                  <!-- Tabs serão adicionadas dinamicamente aqui -->
                </div>
                <div id="orders-accordion">
                  <!-- Pedidos serão agrupados por data aqui -->
                  <div class="list-group-item text-center py-5">
                    <i class="fas fa-clipboard-list fa-3x text-muted mb-3"></i>
                    <p class="mb-0">Nenhum pedido encontrado</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal de Confirmação -->
  <div class="modal fade" id="confirmationModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">Pedido Confirmado!</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center py-4">
          <i class="fas fa-check-circle text-success mb-3" style="font-size: 3rem;"></i>
          <h4 class="mb-3">Seu pedido foi recebido!</h4>
          <p class="mb-4">Agora vamos preparar seu pedido com todo cuidado. Você será redirecionado para o WhatsApp para confirmar os detalhes.</p>
          <div class="d-flex justify-content-center">
            <div class="spinner-border text-primary" role="status">
              <span class="visually-hidden">Carregando...</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Login Admin -->
  <div class="modal fade" id="adminLoginModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">Acesso Administrativo</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="admin-login-form">
            <div class="mb-3">
              <label for="admin-username" class="form-label">Usuário</label>
              <input type="text" class="form-control" id="admin-username" required>
            </div>
            <div class="mb-3">
              <label for="admin-password" class="form-label">Senha</label>
              <input type="password" class="form-control" id="admin-password" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">
              <i class="fas fa-sign-in-alt me-1"></i> Entrar
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para Visualizar Pedido da Cozinha -->
  <div class="modal fade" id="kitchenOrderModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">Pedido para Cozinha</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="kitchen-order-content">
          <!-- Conteúdo do pedido será inserido aqui -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
          <button type="button" class="btn btn-primary" id="print-kitchen-order">
            <i class="fas fa-print me-1"></i> Imprimir
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Opções do Produto -->
  <div class="modal fade options-modal" id="productOptionsModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title" id="productOptionsModalTitle">Opções do Produto</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" id="product-options-content">
          <!-- Conteúdo das opções será inserido aqui -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="confirm-product-options">
            <i class="fas fa-check me-1"></i> Confirmar
          </button>
        </div>
      </div>
    </div>
  </div>

  <footer class="bg-dark text-white py-4">
    <div class="container">
      <div class="row">
        <div class="col-md-4 mb-4 mb-md-0">
          <h3 class="h5"><span class="text-primary">Cozinha</span> da Vivi</h3>
          <p class="small text-muted">Comida caseira feita com ingredientes frescos e muito amor.</p>
        </div>
        <div class="col-md-4 mb-4 mb-md-0">
          <h3 class="h5">Horário de Funcionamento</h3>
          <ul class="list-unstyled small text-muted">
            <li>Segunda a Sexta: 11h às 22h</li>
            <li>Sábado: 11h às 23h</li>
            <li>Domingo: 11h às 17h</li>
          </ul>
        </div>
        <div class="col-md-4">
          <h3 class="h5">Contato</h3>
          <ul class="list-unstyled small text-muted">
            <li><i class="fas fa-phone-alt me-2"></i> (31) 3333-4444</li>
            <li><i class="fas fa-map-marker-alt me-2"></i> Rua das Flores, 123 - Centro</li>
            <li><i class="fab fa-whatsapp me-2"></i> (31) 93373-7672</li>
          </ul>
        </div>
      </div>
      <hr class="my-4 bg-secondary">
      <div class="text-center small text-muted">
        <p class="mb-0">&copy; 2025 Cozinha da Vivi - Todos os direitos reservados</p>
      </div>
    </div>
  </footer>

  <!-- Botão de acesso admin (oculto para usuários comuns) -->
  <div class="admin-access-btn" id="admin-access-btn">
    <i class="fas fa-lock"></i>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
  
  <script>
    // Configurações do Firebase (com suas credenciais)
    const firebaseConfig = {
      apiKey: "AIzaSyCV809Fi4JTLZclARfU4MtNSAVkJIrGcfk",
      authDomain: "cozinha-da-vivi-83d09.firebaseapp.com",
      projectId: "cozinha-da-vivi-83d09",
      storageBucket: "cozinha-da-vivi-83d09.firebasestorage.app",
      messagingSenderId: "740046409209",
      appId: "1:740046409209:web:f8cff12dc530e22fba4128",
      databaseURL: "https://cozinha-da-vivi-83d09-default-rtdb.europe-west1.firebasedatabase.app"
    };

    // Inicializa o Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Configurações do aplicativo
    const APP_CONFIG = {
      whatsappNumber: "351933737672",
      deliveryFee: 5.00,
      restaurantName: "Cozinha da Vivi",
      restaurantAddress: "Rua das Flores, 123 - Centro",
      adminCredentials: {
        username: "admin",
        password: "cozinhadavivi123"
      }
    };

    // Estado do aplicativo
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let orders = [];
    let isAdminLoggedIn = localStorage.getItem('adminLoggedIn') === 'true';
    let lastOrderCount = 0;
    let pendingOrdersCount = 0;
    let currentProductOptions = null;
    let newOrders = []; // Para rastrear novos pedidos

    // Elementos do DOM
    const DOM = {
      productSection: document.getElementById("product-section"),
      checkoutSection: document.getElementById("checkout-section"),
      adminPanel: document.getElementById("admin-panel"),
      cartItems: document.getElementById("cart-items"),
      totalElement: document.getElementById("total"),
      subtotalElement: document.getElementById("subtotal"),
      checkoutButton: document.getElementById("checkout-button"),
      cartCount: document.getElementById("cart-count"),
      cartIndicator: document.getElementById("cart-indicator"),
      productContainer: document.getElementById("product-container"),
      filterButtons: document.querySelectorAll('.filter-btn'),
      confirmationModal: new bootstrap.Modal(document.getElementById('confirmationModal')),
      adminLoginModal: new bootstrap.Modal(document.getElementById('adminLoginModal')),
      kitchenOrderModal: new bootstrap.Modal(document.getElementById('kitchenOrderModal')),
      productOptionsModal: new bootstrap.Modal(document.getElementById('productOptionsModal')),
      adminAccessBtn: document.getElementById("admin-access-btn"),
      adminLogoutButton: document.getElementById("admin-logout"),
      backToCartButton: document.getElementById("back-to-cart-button"),
      confirmOrderButton: document.getElementById("confirm-order-button"),
      checkoutItems: document.getElementById("checkout-items"),
      checkoutSubtotal: document.getElementById("checkout-subtotal"),
      checkoutDeliveryFee: document.getElementById("checkout-delivery-fee"),
      checkoutTotal: document.getElementById("checkout-total"),
      deliveryOptionCards: document.querySelectorAll('.delivery-option-card'),
      paymentMethodCards: document.querySelectorAll('.payment-method-card'),
      deliveryFields: document.querySelectorAll('.delivery-field'),
      customerInfoForm: document.getElementById("customer-info-form"),
      cashChangeField: document.getElementById("cash-change-field"),
      ordersList: document.getElementById("orders-accordion"),
      todayOrders: document.getElementById("today-orders"),
      preparingOrders: document.getElementById("preparing-orders"),
      deliveryOrders: document.getElementById("delivery-orders"),
      statusFilter: document.getElementById("status-filter"),
      typeFilter: document.getElementById("type-filter"),
      applyFilters: document.getElementById("apply-filters"),
      kitchenOrderContent: document.getElementById("kitchen-order-content"),
      printKitchenOrder: document.getElementById("print-kitchen-order"),
      cartSidebar: document.getElementById("cart-sidebar"),
      cartOverlay: document.getElementById("cart-overlay"),
      closeCart: document.getElementById("close-cart"),
      lastUpdate: document.getElementById("last-update"),
      notificationBell: document.getElementById("notification-bell"),
      notificationBadge: document.getElementById("notification-badge"),
      dayTabs: document.getElementById("day-tabs"),
      productOptionsContent: document.getElementById("product-options-content"),
      productOptionsModalTitle: document.getElementById("productOptionsModalTitle"),
      confirmProductOptions: document.getElementById("confirm-product-options"),
      mainHeader: document.getElementById("main-header")
    };

    // Funções do Firebase
    const FirebaseService = {
      saveOrder: async (order) => {
        try {
          const newOrderRef = database.ref('orders').push();
          await newOrderRef.set(order);
          return { ...order, id: newOrderRef.key };
        } catch (error) {
          console.error("Erro ao salvar pedido:", error);
          return null;
        }
      },

      listenForOrders: (callback) => {
        database.ref('orders').on('value', (snapshot) => {
          const ordersData = snapshot.val();
          const ordersArray = ordersData ? Object.keys(ordersData).map(key => ({
            id: key,
            ...ordersData[key]
          })) : [];
          callback(ordersArray);
        });
      },

      updateOrderStatus: async (orderId, newStatus) => {
        try {
          await database.ref(`orders/${orderId}/status`).set(newStatus);
          return true;
        } catch (error) {
          console.error("Erro ao atualizar status:", error);
          return false;
        }
      }
    };

    // Funções utilitárias
    const Utils = {
      formatCurrency: (value) => {
        return value.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
      },
      parsePrice: (priceString) => {
        return parseFloat(priceString.replace("R$", "").replace(",", ".").trim());
      },
      animateElement: (element, animation) => {
        element.classList.add("animate__animated", `animate__${animation}`);
        setTimeout(() => {
          element.classList.remove("animate__animated", `animate__${animation}`);
        }, 1000);
      },
      showNotification: (message, type = 'success') => {
        const notification = document.createElement('div');
        notification.className = `position-fixed bottom-0 end-0 m-3 alert alert-${type} alert-dismissible fade show`;
        notification.style.zIndex = '1100';
        notification.innerHTML = `
          ${message}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        `;
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.classList.remove('show');
          setTimeout(() => notification.remove(), 150);
        }, 3000);
      },
      validatePhone: (phone) => {
        // Aceita qualquer formato internacional de telefone
        return /^\+?[\d\s-]{10,15}$/.test(phone);
      },
      getTodayDate: () => {
        const today = new Date();
        return `${today.getDate()}/${today.getMonth() + 1}/${today.getFullYear()}`;
      },
      playNotificationSound: () => {
        const audio = new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3');
        audio.volume = 0.5; // Reduz o volume para não ser muito alto
        audio.play().catch(e => console.log('Erro ao reproduzir som:', e));
      },
      updateTimestamp: () => {
        const now = new Date();
        DOM.lastUpdate.textContent = `Atualizado: ${now.getHours()}:${now.getMinutes().toString().padStart(2, '0')}`;
      },
      getDayName: (dayIndex) => {
        const days = ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'];
        return days[dayIndex];
      },
      formatDate: (dateString) => {
        const date = new Date(dateString);
        return date.toLocaleDateString('pt-BR');
      },
      showNewOrderNotification: (count) => {
        const notification = document.createElement('div');
        notification.className = 'new-order-notification';
        notification.innerHTML = `
          <i class="fas fa-bell"></i>
          <span>${count} novo${count > 1 ? 's' : ''} pedido${count > 1 ? 's' : ''} recebido${count > 1 ? 's' : ''}!</span>
        `;
        
        document.body.appendChild(notification);
        
        // Remove a notificação após 5 segundos
        setTimeout(() => {
          notification.style.opacity = '0';
          setTimeout(() => notification.remove(), 300);
        }, 5000);
      }
    };

    // Funções do Carrinho
    const Cart = {
      updateStorage: () => {
        localStorage.setItem('cart', JSON.stringify(cart));
      },

      addItem: (id, name, price, image = '', options = {}) => {
        const existingItem = cart.find(item => item.id === id && JSON.stringify(item.options) === JSON.stringify(options));
        
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ id, name, price, quantity: 1, image, options });
        }
        
        Cart.updateStorage();
        Cart.updateUI();
        
        const productElement = document.querySelector(`.product[data-id="${id}"]`);
        if (productElement) {
          Utils.animateElement(productElement, 'pulse');
        }
        
        Utils.showNotification(`${name} adicionado ao carrinho!`);
      },

      updateItemQuantity: (id, newQuantity) => {
        const item = cart.find(item => item.id === id);
        if (item) {
          if (newQuantity <= 0) {
            Cart.removeItem(id);
          } else {
            item.quantity = newQuantity;
            Cart.updateStorage();
            Cart.updateUI();
          }
        }
      },

      removeItem: (id) => {
        const item = cart.find(item => item.id === id);
        if (item) {
          cart = cart.filter(item => item.id !== id);
          Cart.updateStorage();
          Cart.updateUI();
          Utils.showNotification(`${item.name} removido do carrinho`, 'warning');
        }
      },

      clear: () => {
        cart = [];
        Cart.updateStorage();
        Cart.updateUI();
      },

      getTotals: () => {
        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const isDelivery = document.getElementById('delivery-method')?.checked || false;
        const deliveryFee = isDelivery ? APP_CONFIG.deliveryFee : 0;
        const total = subtotal + deliveryFee;
        
        return { subtotal, deliveryFee, total };
      },

      updateUI: () => {
        DOM.cartItems.innerHTML = "";
        
        const { subtotal, deliveryFee, total } = Cart.getTotals();
        const itemCount = cart.reduce((count, item) => count + item.quantity, 0);

        if (cart.length === 0) {
          DOM.cartItems.innerHTML = `
            <div class="list-group-item text-center py-4 empty-cart">
              <i class="fas fa-shopping-bag empty-cart-icon mb-3"></i>
              <p class="mb-0">Seu carrinho está vazio</p>
              <small class="text-muted">Adicione itens para continuar</small>
            </div>
          `;
        } else {
          cart.forEach(item => {
            const li = document.createElement("div");
            li.className = "list-group-item";
            
            let optionsText = '';
            if (item.options && Object.keys(item.options).length > 0) {
              optionsText = Object.values(item.options).map(opt => opt.join(', ')).join(' | ');
            }
            
            li.innerHTML = `
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h6 class="mb-1">${item.name}</h6>
                  ${optionsText ? `<small class="text-muted">${optionsText}</small>` : ''}
                  <small class="d-block text-muted">${Utils.formatCurrency(item.price)}</small>
                </div>
                <div class="d-flex align-items-center gap-3">
                  <div class="cart-item-quantity">
                    <button class="quantity-btn decrease" data-id="${item.id}">
                      <i class="fas fa-minus"></i>
                    </button>
                    <span class="quantity">${item.quantity}</span>
                    <button class="quantity-btn increase" data-id="${item.id}">
                      <i class="fas fa-plus"></i>
                    </button>
                  </div>
                  <span class="fw-bold">${Utils.formatCurrency(item.price * item.quantity)}</span>
                  <button class="remove-item btn btn-sm btn-outline-danger" data-id="${item.id}">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
            `;
            DOM.cartItems.appendChild(li);
          });
        }

        DOM.subtotalElement.textContent = Utils.formatCurrency(subtotal);
        DOM.totalElement.textContent = Utils.formatCurrency(total);
        
        DOM.cartCount.textContent = itemCount;
        DOM.cartCount.style.display = itemCount > 0 ? "flex" : "none";
        
        DOM.checkoutButton.disabled = cart.length === 0;
      },
      
      toggleSidebar: () => {
        if (cart.length === 0) {
          DOM.cartSidebar.classList.remove('show');
          DOM.cartOverlay.classList.remove('show');
          return;
        }
        
        if (DOM.cartSidebar.classList.contains('show')) {
          DOM.cartSidebar.classList.remove('show');
          DOM.cartOverlay.classList.remove('show');
        } else {
          DOM.cartSidebar.classList.add('show');
          DOM.cartOverlay.classList.add('show');
        }
      }
    };

    // Funções de Pedido
    const Order = {
      create: () => {
        const { subtotal, deliveryFee, total } = Cart.getTotals();
        const deliveryType = document.querySelector('input[name="delivery-method"]:checked').value;
        const paymentMethod = document.querySelector('input[name="payment-method"]:checked')?.value || 'mbway';
        
        const customerInfo = {
          name: document.getElementById("customer-name").value,
          phone: document.getElementById("customer-phone").value,
          whatsapp: document.getElementById("customer-phone").value,
          address: document.getElementById("customer-address").value,
          complement: document.getElementById("customer-complement").value,
          neighborhood: document.getElementById("customer-neighborhood").value,
          instructions: document.getElementById("customer-instructions").value
        };
        
        return {
          cliente: customerInfo.name,
          telefone: customerInfo.phone,
          whatsapp: customerInfo.whatsapp,
          itens: cart.map(item => ({
            nome: item.name,
            quantidade: item.quantity,
            preco: item.price,
            opcoes: item.options || {}
          })),
          subtotal,
          taxaEntrega: deliveryFee,
          total,
          status: 'pending',
          tipoEntrega: deliveryType,
          metodoPagamento: paymentMethod,
          trocoPara: paymentMethod === 'dinheiro' ? document.getElementById("cash-change").value || '0' : null,
          endereco: deliveryType === 'entrega' ? 
            `${customerInfo.address}, ${customerInfo.complement ? customerInfo.complement + ', ' : ''}${customerInfo.neighborhood}` : 
            'Retirada no local',
          instrucoes: customerInfo.instructions,
          data: new Date().toLocaleString('pt-BR'),
          restaurante: APP_CONFIG.restaurantName,
          enderecoRestaurante: APP_CONFIG.restaurantAddress
        };
      },

      saveOrder: async (order) => {
        try {
          const newOrderRef = database.ref('orders').push();
          await newOrderRef.set(order);
          return { ...order, id: newOrderRef.key };
        } catch (error) {
          console.error("Erro ao salvar pedido:", error);
          throw error;
        }
      },

      sendToBackend: async () => {
        try {
          // Validação básica do carrinho
          if (cart.length === 0) {
            throw new Error("Carrinho vazio");
          }

          // Validação dos campos obrigatórios
          const name = document.getElementById("customer-name").value;
          const phone = document.getElementById("customer-phone").value;
          const isDelivery = document.getElementById("delivery-method").checked;
          const address = document.getElementById("customer-address").value;
          const neighborhood = document.getElementById("customer-neighborhood").value;
          
          if (!name || !phone) {
            throw new Error("Por favor, preencha seu nome e telefone");
          }
          
          if (!Utils.validatePhone(phone)) {
            throw new Error("Por favor, insira um telefone válido");
          }
          
          if (isDelivery && (!address || !neighborhood)) {
            throw new Error("Por favor, preencha seu endereço completo");
          }

          // Mostra estado de carregamento
          DOM.confirmOrderButton.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Processando...';
          DOM.confirmOrderButton.disabled = true;

          // Cria e salva o pedido
          const order = Order.create();
          const savedOrder = await Order.saveOrder(order);
          
          if (!savedOrder) {
            throw new Error("Falha ao salvar pedido");
          }

          return savedOrder;
          
        } catch (error) {
          console.error("Erro em sendToBackend:", error);
          Utils.showNotification(`Erro: ${error.message}`, 'danger');
          return null;
          
        } finally {
          // Restaura o botão independentemente do resultado
          DOM.confirmOrderButton.innerHTML = '<i class="fas fa-check-circle me-2"></i> Confirmar Pedido';
          DOM.confirmOrderButton.disabled = false;
        }
      },

      sendToWhatsApp: (pedido) => {
        const itemsText = pedido.itens.map(item => 
          `➡ ${item.nome} - ${item.quantidade}x ${Utils.formatCurrency(item.preco)} = ${Utils.formatCurrency(item.preco * item.quantidade)}` +
          (item.opcoes && Object.keys(item.opcoes).length > 0 ? 
            `\n   ${Object.entries(item.opcoes).map(([key, val]) => `${key}: ${val.join(', ')}`).join(' | ')}` : '')
        ).join("%0A");
        
        const deliveryText = pedido.tipoEntrega === 'entrega' ? 
          `%0A%0A📍 *Endereço de entrega:*%0A${pedido.endereco}%0A%0A📝 *Instruções:*%0A${pedido.instrucoes || 'Nenhuma instrução adicional'}` : 
          `%0A%0A🏪 *Retirada no local*%0A${APP_CONFIG.restaurantAddress}`;
        
        let paymentText = '';
        if (pedido.metodoPagamento === 'mbway') {
          paymentText = `💳 *Pagamento via MB Way*%0AVocê receberá uma solicitação de pagamento`;
        } else if (pedido.metodoPagamento === 'dinheiro') {
          paymentText = `💵 *Pagamento em dinheiro*%0ATroco para: R$ ${pedido.trocoPara || 'Sem troco'}`;
        } else {
          paymentText = `💳 *Pagamento com cartão*%0AMáquina será levada na entrega/retirada`;
        }
        
        const message = `*📝 Novo Pedido - ${APP_CONFIG.restaurantName}*%0A%0A👤 *Cliente:* ${pedido.cliente}%0A📞 *Telefone:* ${pedido.telefone}%0A✉ *WhatsApp:* ${pedido.whatsapp}%0A%0A📦 *Itens do Pedido:*%0A${itemsText}%0A%0A💰 *Valores:*%0A*Subtotal:* ${Utils.formatCurrency(pedido.subtotal)}%0A*Taxa de entrega:* ${Utils.formatCurrency(pedido.taxaEntrega)}%0A*Total:* ${Utils.formatCurrency(pedido.total)}%0A%0A🚚 *Forma de recebimento:* ${pedido.tipoEntrega === 'entrega' ? 'Entrega' : 'Retirada no local'}${deliveryText}%0A%0A${paymentText}%0A%0A⏰ *Data/hora:* ${pedido.data}%0A%0A_🔔 Aguardando confirmação do restaurante_`;
        
        const whatsappURL = `https://wa.me/${APP_CONFIG.whatsappNumber}?text=${message}`;
        
        DOM.confirmationModal.show();
        
        setTimeout(() => {
          window.open(whatsappURL, "_blank");
          DOM.confirmationModal.hide();
          Cart.clear();
          DOM.productSection.classList.remove("d-none");
          DOM.checkoutSection.classList.add("d-none");
          Cart.toggleSidebar();
        }, 3000);
      },

      updateAdminPanel: () => {
        const statusFilter = DOM.statusFilter.value;
        const typeFilter = DOM.typeFilter.value;
        
        let filteredOrders = [...orders].reverse();
        
        if (statusFilter !== 'all') {
          filteredOrders = filteredOrders.filter(order => order.status === statusFilter);
        }
        
        if (typeFilter !== 'all') {
          filteredOrders = filteredOrders.filter(order => order.tipoEntrega === typeFilter);
        }
        
        // Agrupa pedidos por data
        const ordersByDate = {};
        filteredOrders.forEach(order => {
          const date = new Date(order.data);
          const dateKey = Utils.formatDate(order.data);
          
          if (!ordersByDate[dateKey]) {
            ordersByDate[dateKey] = [];
          }
          ordersByDate[dateKey].push(order);
        });
        
        // Atualiza as abas de dias
        DOM.dayTabs.innerHTML = '';
        Object.keys(ordersByDate).forEach(dateKey => {
          const tab = document.createElement('div');
          tab.className = 'day-tab';
          tab.textContent = dateKey;
          tab.addEventListener('click', () => {
            document.querySelectorAll('.day-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');
            Order.renderOrdersForDate(dateKey, ordersByDate[dateKey]);
          });
          
          if (DOM.dayTabs.children.length === 0) {
            tab.classList.add('active');
          }
          
          DOM.dayTabs.appendChild(tab);
        });
        
        // Renderiza os pedidos da primeira data ou mensagem de nenhum pedido
        DOM.ordersList.innerHTML = '';
        
        if (Object.keys(ordersByDate).length > 0) {
          Object.keys(ordersByDate).forEach(dateKey => {
            const ordersForDate = ordersByDate[dateKey];
            const accordion = document.createElement('div');
            accordion.className = 'order-accordion';
            
            accordion.innerHTML = `
              <div class="order-accordion-header">
                <span class="date">${dateKey}</span>
                <span class="count">${ordersForDate.length}</span>
              </div>
              <div class="order-accordion-content">
                ${ordersForDate.map(order => Order.renderOrderItem(order)).join('')}
              </div>
            `;
            
            DOM.ordersList.appendChild(accordion);
            
            // Adiciona evento de clique para expandir/recolher
            const header = accordion.querySelector('.order-accordion-header');
            const content = accordion.querySelector('.order-accordion-content');
            
            header.addEventListener('click', () => {
              content.style.display = content.style.display === 'block' ? 'none' : 'block';
            });
          });
        } else {
          DOM.ordersList.innerHTML = `
            <div class="list-group-item text-center py-5">
              <i class="fas fa-clipboard-list fa-3x text-muted mb-3"></i>
              <p class="mb-0">Nenhum pedido encontrado</p>
            </div>
          `;
        }
        
        const today = Utils.getTodayDate();
        const todayOrdersCount = orders.filter(order => order.data.includes(today)).length;
        const preparingOrdersCount = orders.filter(order => order.status === 'preparing').length;
        const deliveryOrdersCount = orders.filter(order => order.status === 'ready' && order.tipoEntrega === 'entrega').length;
        
        DOM.todayOrders.textContent = todayOrdersCount;
        DOM.preparingOrders.textContent = preparingOrdersCount;
        DOM.deliveryOrders.textContent = deliveryOrdersCount;
        
        Utils.updateTimestamp();
      },
      
      renderOrderItem: (order) => {
        const isNew = newOrders.includes(order.id);
        const newOrderClass = isNew ? 'new-order' : '';
        
        return `
          <div class="order-card p-3 ${newOrderClass}" data-id="${order.id}">
            <div class="d-flex justify-content-between align-items-start mb-2">
              <div>
                <h5 class="mb-1">Pedido #${order.id.slice(-6)}</h5>
                <p class="mb-1 small text-muted"><i class="fas fa-user me-1"></i> ${order.cliente}</p>
                <p class="mb-1 small text-muted"><i class="fas fa-phone me-1"></i> ${order.telefone}</p>
              </div>
              <div>
                <span class="badge order-status-badge ${Order.getStatusClass(order.status)}">${Order.getStatusText(order.status)}</span>
              </div>
            </div>
            
            <div class="mb-2">
              <p class="mb-1 small"><i class="fas ${order.tipoEntrega === 'entrega' ? 'fa-motorcycle' : 'fa-store'} me-1"></i> ${order.tipoEntrega === 'entrega' ? 'Entrega' : 'Retirada'}</p>
              <p class="mb-1 small text-muted"><i class="fas fa-money-bill-wave me-1"></i> ${Order.getPaymentText(order.metodoPagamento, order.trocoPara)}</p>
              ${order.instrucoes ? `<p class="mb-1 small text-muted"><i class="fas fa-sticky-note me-1"></i> ${order.instrucoes}</p>` : ''}
            </div>
            
            <div class="border-top pt-2 mb-2">
              ${order.itens.map(item => `
                <div class="d-flex justify-content-between small">
                  <span>${item.quantidade}x ${item.nome}${item.opcoes && Object.keys(item.opcoes).length > 0 ? ` (${Object.values(item.opcoes).join(', ')})` : ''}</span>
                  <span>${Utils.formatCurrency(item.preco * item.quantidade)}</span>
                </div>
              `).join('')}
            </div>
            
            <div class="d-flex justify-content-between border-top pt-2">
              <div>
                <span class="small text-muted">${order.data}</span>
              </div>
              <div class="text-end">
                <div class="small text-muted">Total: ${Utils.formatCurrency(order.total)}</div>
                <div class="order-actions mt-1">
                  <button class="btn btn-outline-primary btn-sm update-status" data-id="${order.id}" data-status="preparing">
                    <i class="fas fa-utensils me-1"></i> Preparar
                  </button>
                  <button class="btn btn-outline-success btn-sm update-status whatsapp-ready-btn" data-id="${order.id}" data-status="ready">
                    <i class="fab fa-whatsapp me-1"></i> Avisar Pronto
                  </button>
                  <button class="btn btn-outline-danger btn-sm update-status" data-id="${order.id}" data-status="cancelled">
                    <i class="fas fa-times me-1"></i> Cancelar
                  </button>
                  <button class="btn btn-outline-secondary btn-sm view-kitchen-order" data-id="${order.id}">
                    <i class="fas fa-print me-1"></i> Imprimir
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      },
      
      renderOrdersForDate: (dateKey, ordersForDate) => {
        // Implementação para renderizar pedidos de uma data específica
        // (já está sendo feito no updateAdminPanel)
      },
      
      getStatusText: (status) => {
        switch(status) {
          case 'pending': return 'Pendente';
          case 'preparing': return 'Em Preparo';
          case 'ready': return 'Pronto';
          case 'delivered': return 'Entregue';
          case 'cancelled': return 'Cancelado';
          default: return status;
        }
      },
      
      getStatusClass: (status) => {
        switch(status) {
          case 'pending': return 'status-pending';
          case 'preparing': return 'status-preparing';
          case 'ready': return 'status-ready';
          case 'delivered': return 'status-delivered';
          case 'cancelled': return 'status-cancelled';
          default: return 'bg-secondary';
        }
      },
      
      getPaymentText: (method, change) => {
        switch(method) {
          case 'mbway': return 'MB Way';
          case 'dinheiro': return `Dinheiro${change ? ' (Troco p/ ' + Utils.formatCurrency(parseFloat(change)) + ')' : ''}`;
          case 'cartao': return 'Cartão';
          default: return method;
        }
      },
      
      updateStatus: (orderId, newStatus) => {
        FirebaseService.updateOrderStatus(orderId, newStatus).then(success => {
          if (success) {
            Utils.showNotification(`Status do pedido #${orderId.slice(-6)} atualizado para ${Order.getStatusText(newStatus)}`, 'success');
            
            // Se o status for "pronto", enviar mensagem pelo WhatsApp
            if (newStatus === 'ready') {
              const order = orders.find(o => o.id === orderId);
              if (order) {
                Order.sendReadyNotification(order);
              }
            }
          }
        });
      },
      
      sendReadyNotification: (order) => {
        const message = `*✅ Pedido Pronto - ${APP_CONFIG.restaurantName}*%0A%0A👤 *Cliente:* ${order.cliente}%0A📞 *Telefone:* ${order.telefone}%0A%0A📦 *Número do Pedido:* #${order.id.slice(-6)}%0A%0A🚚 *Forma de recebimento:* ${order.tipoEntrega === 'entrega' ? 'Entrega' : 'Retirada no local'}%0A%0A💰 *Total do Pedido:* ${Utils.formatCurrency(order.total)}%0A%0A_⌛ Por favor, dirija-se ao restaurante para retirar seu pedido ou aguarde a entrega._`;
        
        const whatsappURL = `https://wa.me/${order.whatsapp.replace(/\D/g, '')}?text=${message}`;
        window.open(whatsappURL, "_blank");
      },
      
      generateKitchenOrder: (orderId) => {
        const order = orders.find(o => o.id === orderId);
        if (!order) return '';
        
        const itemsText = order.itens.map(item => `
          <div class="kitchen-order-item">
            <span>${item.quantidade}x ${item.nome}${item.opcoes && Object.keys(item.opcoes).length > 0 ? ` (${Object.values(item.opcoes).join(', ')})` : ''}</span>
          </div>
        `).join('');
        
        const notes = order.instrucoes ? `
          <div class="kitchen-order-item">
            <span><strong>OBS:</strong> ${order.instrucoes}</span>
          </div>
        ` : '';
        
        const kitchenOrder = `
          <div class="kitchen-order" id="kitchen-order-print">
            <div class="kitchen-order-header">
              ${APP_CONFIG.restaurantName}<br>
              Pedido #${order.id.slice(-6)}
            </div>
            
            <div class="kitchen-order-item">
              <span><strong>Cliente:</strong> ${order.cliente}</span>
            </div>
            
            <div class="kitchen-order-item">
              <span><strong>${order.tipoEntrega === 'entrega' ? 'Entrega' : 'Retirada'}</strong></span>
            </div>
            
            ${order.tipoEntrega === 'entrega' ? `
              <div class="kitchen-order-item">
                <span><strong>Endereço:</strong> ${order.endereco}</span>
              </div>
            ` : ''}
            
            <div class="kitchen-order-item">
              <span><strong>Data:</strong> ${order.data}</span>
            </div>
            
            <div style="margin: 10px 0; border-top: 1px dashed #000;"></div>
            
            ${itemsText}
            
            ${notes}
            
            <div class="kitchen-order-footer">
              Total: ${Utils.formatCurrency(order.total)}
            </div>
          </div>
        `;
        
        return kitchenOrder;
      },
      
      printKitchenOrder: (orderId) => {
        const kitchenOrder = Order.generateKitchenOrder(orderId);
        DOM.kitchenOrderContent.innerHTML = kitchenOrder;
        
        // Abre janela de impressão
        const printWindow = window.open('', '_blank');
        printWindow.document.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <title>Pedido Cozinha</title>
            <style>
              body { font-family: 'Courier New', monospace; font-size: 14px; line-height: 1.3; }
              .kitchen-order { max-width: 58mm; padding: 10px; }
              .kitchen-order-header { text-align: center; font-weight: bold; margin-bottom: 10px; border-bottom: 1px dashed #000; padding-bottom: 5px; }
              .kitchen-order-item { display: flex; justify-content: space-between; margin-bottom: 3px; }
              .kitchen-order-footer { border-top: 1px dashed #000; margin-top: 10px; padding-top: 5px; font-weight: bold; }
            </style>
          </head>
          <body onload="window.print();window.close()">
            ${kitchenOrder}
          </body>
          </html>
        `);
        printWindow.document.close();
      }
    };

    // Funções de Filtro
    const Filter = {
      apply: (category) => {
        const products = document.querySelectorAll('.product');
        
        products.forEach(product => {
          if (category === 'all' || product.dataset.category === category) {
            product.style.display = 'block';
          } else {
            product.style.display = 'none';
          }
        });
        
        DOM.filterButtons.forEach(button => {
          if (button.dataset.category === category) {
            button.classList.add('active');
          } else {
            button.classList.remove('active');
          }
        });
      }
    };

    // Funções de Checkout
    const Checkout = {
      init: () => {
        const { subtotal, deliveryFee, total } = Cart.getTotals();
        
        DOM.checkoutSubtotal.textContent = Utils.formatCurrency(subtotal);
        DOM.checkoutDeliveryFee.textContent = Utils.formatCurrency(deliveryFee);
        DOM.checkoutTotal.textContent = Utils.formatCurrency(total);
        
        DOM.checkoutItems.innerHTML = '';
        cart.forEach(item => {
          const li = document.createElement("div");
          li.className = "list-group-item";
          
          let optionsText = '';
          if (item.options && Object.keys(item.options).length > 0) {
            optionsText = Object.values(item.options).map(opt => opt.join(', ')).join(' | ');
          }
          
          li.innerHTML = `
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <h6 class="mb-1">${item.name}</h6>
                ${optionsText ? `<small class="text-muted">${optionsText}</small>` : ''}
              </div>
              <div class="d-flex align-items-center gap-3">
                <span class="quantity">${item.quantity}x</span>
                <span class="fw-bold">${Utils.formatCurrency(item.price * item.quantity)}</span>
              </div>
            </div>
          `;
          DOM.checkoutItems.appendChild(li);
        });
      },
      
      toggleDeliveryFields: (show) => {
        DOM.deliveryFields.forEach(field => {
          field.style.display = show ? 'block' : 'none';
        });
        
        const deliveryFee = show ? APP_CONFIG.deliveryFee : 0;
        DOM.checkoutDeliveryFee.textContent = Utils.formatCurrency(deliveryFee);
        
        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const total = subtotal + deliveryFee;
        DOM.checkoutTotal.textContent = Utils.formatCurrency(total);
      }
    };

    // Funções de Admin
    const Admin = {
      login: (username, password) => {
        if (username === APP_CONFIG.adminCredentials.username && password === APP_CONFIG.adminCredentials.password) {
          isAdminLoggedIn = true;
          localStorage.setItem('adminLoggedIn', 'true');
          
          // Esconde o cabeçalho principal e mostra apenas o painel administrativo
          DOM.mainHeader.style.display = 'none';
          DOM.productSection.classList.add("d-none");
          DOM.checkoutSection.classList.add("d-none");
          DOM.adminPanel.classList.remove("d-none");
          
          Order.updateAdminPanel();
          
          DOM.adminLoginModal.hide();
          
          return true;
        }
        return false;
      },
      
      logout: () => {
        isAdminLoggedIn = false;
        localStorage.setItem('adminLoggedIn', 'false');
        
        // Mostra o cabeçalho principal novamente
        DOM.mainHeader.style.display = 'block';
        DOM.productSection.classList.remove("d-none");
        DOM.checkoutSection.classList.add("d-none");
        DOM.adminPanel.classList.add("d-none");
      },
      
      checkLoginStatus: () => {
        if (isAdminLoggedIn) {
          DOM.mainHeader.style.display = 'none';
          DOM.productSection.classList.add("d-none");
          DOM.checkoutSection.classList.add("d-none");
          DOM.adminPanel.classList.remove("d-none");
          Order.updateAdminPanel();
        }
      }
    };

    // Funções para lidar com opções de produtos
    const ProductOptions = {
      showOptions: (productId, productName) => {
        // Aqui você pode implementar a lógica para mostrar opções específicas para cada produto
        // Por enquanto, vamos apenas mostrar um modal genérico
        DOM.productOptionsModalTitle.textContent = `Opções: ${productName}`;
        DOM.productOptionsContent.innerHTML = `
          <div class="option-section">
            <div class="option-section-title">Acompanhamentos</div>
            <div class="option-item">
              <label>
                <input type="checkbox" name="acompanhamento" value="Arroz">
                Arroz
              </label>
            </div>
            <div class="option-item">
              <label>
                <input type="checkbox" name="acompanhamento" value="Feijão">
                Feijão
              </label>
            </div>
            <div class="option-item">
              <label>
                <input type="checkbox" name="acompanhamento" value="Farofa">
                Farofa
              </label>
            </div>
          </div>
          <div class="option-section">
            <div class="option-section-title">Saladas</div>
            <div class="option-item">
              <label>
                <input type="checkbox" name="salada" value="Salada Mista">
                Salada Mista
              </label>
            </div>
            <div class="option-item">
              <label>
                <input type="checkbox" name="salada" value="Vinagrete">
                Vinagrete
              </label>
            </div>
          </div>
        `;
        
        currentProductOptions = {
          id: productId,
          name: productName,
          price: 0 // Você pode ajustar isso com base no produto real
        };
        
        DOM.productOptionsModal.show();
      },
      
      handleOptionsConfirmation: () => {
        if (!currentProductOptions) return;
        
        const selectedOptions = {};
        const checkboxes = DOM.productOptionsContent.querySelectorAll('input[type="checkbox"]:checked');
        
        checkboxes.forEach(checkbox => {
          const group = checkbox.name;
          if (!selectedOptions[group]) {
            selectedOptions[group] = [];
          }
          selectedOptions[group].push(checkbox.value);
        });
        
        Cart.addItem(
          currentProductOptions.id,
          currentProductOptions.name,
          currentProductOptions.price,
          '',
          selectedOptions
        );
        
        DOM.productOptionsModal.hide();
        currentProductOptions = null;
      }
    };

    // Event Listeners
    function setupEventListeners() {
      document.addEventListener('click', (event) => {
        if (event.target.closest('.add-to-cart')) {
          const button = event.target.closest('.add-to-cart');
          const productElement = button.closest('.product');
          const id = productElement.getAttribute("data-id");
          const name = productElement.querySelector(".product-name").textContent;
          const price = Utils.parsePrice(productElement.querySelector(".product-price").textContent);
          const image = productElement.querySelector(".product-image")?.src || '';
          
          // Verifica se o produto tem opções (você pode adicionar uma classe ou atributo para identificar)
          if (productElement.hasAttribute('data-has-options')) {
            ProductOptions.showOptions(id, name);
          } else {
            Cart.addItem(id, name, price, image);
          }
        }
      });

      DOM.cartItems.addEventListener("click", (event) => {
        if (event.target.closest(".remove-item")) {
          const id = event.target.closest(".remove-item").getAttribute("data-id");
          Cart.removeItem(id);
        }
        
        if (event.target.closest(".increase")) {
          const id = event.target.closest(".increase").getAttribute("data-id");
          const item = cart.find(item => item.id === id);
          if (item) {
            Cart.updateItemQuantity(id, item.quantity + 1);
          }
        }
        
        if (event.target.closest(".decrease")) {
          const id = event.target.closest(".decrease").getAttribute("data-id");
          const item = cart.find(item => item.id === id);
          if (item) {
            Cart.updateItemQuantity(id, item.quantity - 1);
          }
        }
      });

      DOM.checkoutButton.addEventListener("click", () => {
        DOM.productSection.classList.add("d-none");
        DOM.checkoutSection.classList.remove("d-none");
        Checkout.init();
        Cart.toggleSidebar();
      });

      DOM.backToCartButton.addEventListener("click", () => {
        DOM.productSection.classList.remove("d-none");
        DOM.checkoutSection.classList.add("d-none");
      });

      DOM.confirmOrderButton.addEventListener("click", async () => {
        const pedido = await Order.sendToBackend();
        if (pedido) {
          Order.sendToWhatsApp(pedido);
        }
      });

      DOM.filterButtons.forEach(button => {
        button.addEventListener('click', () => {
          Filter.apply(button.dataset.category);
        });
      });

      DOM.cartIndicator.addEventListener('click', () => {
        Cart.toggleSidebar();
      });
      
      DOM.closeCart.addEventListener('click', () => {
        Cart.toggleSidebar();
      });
      
      DOM.cartOverlay.addEventListener('click', () => {
        Cart.toggleSidebar();
      });
      
      DOM.deliveryOptionCards.forEach(card => {
        card.addEventListener('click', () => {
          const input = card.querySelector('input');
          input.checked = true;
          
          DOM.deliveryOptionCards.forEach(c => c.classList.remove('active'));
          card.classList.add('active');
          
          Checkout.toggleDeliveryFields(input.value === 'entrega');
        });
      });
      
      DOM.paymentMethodCards.forEach(card => {
        card.addEventListener('click', () => {
          const input = card.querySelector('input');
          input.checked = true;
          
          DOM.paymentMethodCards.forEach(c => c.classList.remove('active'));
          card.classList.add('active');
          
          if (input.value === 'dinheiro') {
            DOM.cashChangeField.classList.remove('d-none');
          } else {
            DOM.cashChangeField.classList.add('d-none');
          }
        });
      });
      
      DOM.adminAccessBtn.addEventListener('click', () => {
        DOM.adminLoginModal.show();
      });
      
      document.getElementById('admin-login-form').addEventListener('submit', (e) => {
        e.preventDefault();
        const username = document.getElementById('admin-username').value;
        const password = document.getElementById('admin-password').value;
        
        if (Admin.login(username, password)) {
          Utils.showNotification('Login realizado com sucesso!', 'success');
        } else {
          Utils.showNotification('Credenciais inválidas', 'danger');
        }
      });
      
      DOM.adminLogoutButton.addEventListener('click', () => {
        Admin.logout();
        Utils.showNotification('Logout realizado com sucesso', 'info');
      });
      
      DOM.ordersList.addEventListener('click', (event) => {
        if (event.target.closest('.update-status')) {
          const button = event.target.closest('.update-status');
          const orderId = button.getAttribute('data-id');
          const newStatus = button.getAttribute('data-status');
          
          Order.updateStatus(orderId, newStatus);
        }
        
        if (event.target.closest('.view-kitchen-order')) {
          const button = event.target.closest('.view-kitchen-order');
          const orderId = button.getAttribute('data-id');
          const kitchenOrder = Order.generateKitchenOrder(orderId);
          
          DOM.kitchenOrderContent.innerHTML = kitchenOrder;
          DOM.kitchenOrderModal.show();
        }
      });
      
      DOM.printKitchenOrder.addEventListener('click', () => {
        const orderId = document.querySelector('.view-kitchen-order.active')?.getAttribute('data-id') || 
                        document.querySelector('.view-kitchen-order')?.getAttribute('data-id');
        if (orderId) {
          Order.printKitchenOrder(orderId);
          DOM.kitchenOrderModal.hide();
        }
      });
      
      DOM.applyFilters.addEventListener('click', () => {
        Order.updateAdminPanel();
      });
      
      DOM.notificationBell.addEventListener('click', () => {
        DOM.notificationBadge.classList.add('d-none');
        pendingOrdersCount = 0;
        newOrders = []; // Limpa a lista de novos pedidos
      });
      
      DOM.confirmProductOptions.addEventListener('click', () => {
        ProductOptions.handleOptionsConfirmation();
      });
    }

    // Inicialização
    function init() {
      setupEventListeners();
      Cart.updateUI();
      Filter.apply('all');
      Checkout.toggleDeliveryFields(true);
      
      // Inicializa o listener de pedidos do Firebase
      FirebaseService.listenForOrders((ordersFromFirebase) => {
        const previousOrderCount = orders.length;
        orders = ordersFromFirebase;
        
        // Verifica se há novos pedidos pendentes
        const newPendingOrders = orders.filter(o => o.status === 'pending');
        
        // Identifica novos pedidos
        const currentOrderIds = orders.map(o => o.id);
        const previousOrderIds = ordersFromFirebase.slice(0, previousOrderCount).map(o => o.id);
        const newlyAddedOrders = currentOrderIds.filter(id => !previousOrderIds.includes(id));
        
        // Atualiza a lista de novos pedidos
        newOrders = [...new Set([...newOrders, ...newlyAddedOrders])];
        
        if (newlyAddedOrders.length > 0 && isAdminLoggedIn) {
          Utils.playNotificationSound();
          Utils.showNotification(`Novo pedido recebido! Total: ${newlyAddedOrders.length}`, 'success');
          Utils.showNewOrderNotification(newlyAddedOrders.length);
          
          // Atualiza o badge de notificação
          pendingOrdersCount += newlyAddedOrders.length;
          DOM.notificationBadge.textContent = pendingOrdersCount;
          DOM.notificationBadge.classList.remove('d-none');
        }
        
        if (isAdminLoggedIn) {
          Order.updateAdminPanel();
        }
      });
      
      Admin.checkLoginStatus();
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>